(function(A,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(A=typeof globalThis!="undefined"?globalThis:A||self,o(A.VNetworkGraph={},A.Vue))})(this,function(A,o){"use strict";var of=Object.defineProperty,rf=Object.defineProperties;var sf=Object.getOwnPropertyDescriptors;var wr=Object.getOwnPropertySymbols;var af=Object.prototype.hasOwnProperty,lf=Object.prototype.propertyIsEnumerable;var Q=Math.pow,Er=(A,o,q)=>o in A?of(A,o,{enumerable:!0,configurable:!0,writable:!0,value:q}):A[o]=q,J=(A,o)=>{for(var q in o||(o={}))af.call(o,q)&&Er(A,q,o[q]);if(wr)for(var q of wr(o))lf.call(o,q)&&Er(A,q,o[q]);return A},nt=(A,o)=>rf(A,sf(o));var ue=(A,o,q)=>new Promise((de,Z)=>{var ot=pe=>{try{Pe(q.next(pe))}catch(Ie){Z(Ie)}},Tt=pe=>{try{Pe(q.throw(pe))}catch(Ie){Z(Ie)}},Pe=pe=>pe.done?de(pe.value):Promise.resolve(pe.value).then(ot,Tt);Pe((q=q.apply(A,o)).next())});const q=["paths","node-labels","nodes","focusring","edge-labels","edges","base","grid","background","root"];function de(e){return o.isReactive(e)?e:o.reactive(e)}function Z(e,t="Parameter"){if(e==null)throw new Error(`${t} is null`);return e}const ot=Symbol("containers");function Tt(e){o.provide(ot,e)}function Pe(){const e=Z(o.inject(ot),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}var pe=typeof global=="object"&&global&&global.Object===Object&&global;const Ie=pe;var kr=typeof self=="object"&&self&&self.Object===Object&&self,xr=Ie||kr||Function("return this")();const ie=xr;var Pr=ie.Symbol;const ye=Pr;var wn=Object.prototype,Sr=wn.hasOwnProperty,Cr=wn.toString,Re=ye?ye.toStringTag:void 0;function Mr(e){var t=Sr.call(e,Re),n=e[Re];try{e[Re]=void 0;var r=!0}catch(s){}var i=Cr.call(e);return r&&(t?e[Re]=n:delete e[Re]),i}var Tr=Object.prototype,Or=Tr.toString;function Br(e){return Or.call(e)}var $r="[object Null]",zr="[object Undefined]",En=ye?ye.toStringTag:void 0;function Se(e){return e==null?e===void 0?zr:$r:En&&En in Object(e)?Mr(e):Br(e)}function be(e){return e!=null&&typeof e=="object"}var _r="[object Symbol]";function kn(e){return typeof e=="symbol"||be(e)&&Se(e)==_r}function Ir(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Ar=Array.isArray;const Ce=Ar;var Lr=1/0,xn=ye?ye.prototype:void 0,Pn=xn?xn.toString:void 0;function Sn(e){if(typeof e=="string")return e;if(Ce(e))return Ir(e,Sn)+"";if(kn(e))return Pn?Pn.call(e):"";var t=e+"";return t=="0"&&1/e==-Lr?"-0":t}var Nr=/\s/;function Dr(e){for(var t=e.length;t--&&Nr.test(e.charAt(t)););return t}var jr=/^\s+/;function Zr(e){return e&&e.slice(0,Dr(e)+1).replace(jr,"")}function fe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cn=0/0,Rr=/^[-+]0x[0-9a-f]+$/i,Vr=/^0b[01]+$/i,Hr=/^0o[0-7]+$/i,Wr=parseInt;function rt(e){if(typeof e=="number")return e;if(kn(e))return Cn;if(fe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=fe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Zr(e);var n=Vr.test(e);return n||Hr.test(e)?Wr(e.slice(2),n?2:8):Rr.test(e)?Cn:+e}var Mn=1/0,Fr=17976931348623157e292;function Ur(e){if(!e)return e===0?e:0;if(e=rt(e),e===Mn||e===-Mn){var t=e<0?-1:1;return t*Fr}return e===e?e:0}function Tn(e){var t=Ur(e),n=t%1;return t===t?n?t-n:t:0}function On(e){return e}var Gr="[object AsyncFunction]",qr="[object Function]",Xr="[object GeneratorFunction]",Kr="[object Proxy]";function Ot(e){if(!fe(e))return!1;var t=Se(e);return t==qr||t==Xr||t==Gr||t==Kr}var Yr=ie["__core-js_shared__"];const Bt=Yr;var Bn=function(){var e=/[^.]+$/.exec(Bt&&Bt.keys&&Bt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Jr(e){return!!Bn&&Bn in e}var Qr=Function.prototype,ei=Qr.toString;function Me(e){if(e!=null){try{return ei.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var ti=/[\\^$.*+?()[\]{}|]/g,ni=/^\[object .+?Constructor\]$/,oi=Function.prototype,ri=Object.prototype,ii=oi.toString,si=ri.hasOwnProperty,ai=RegExp("^"+ii.call(si).replace(ti,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function li(e){if(!fe(e)||Jr(e))return!1;var t=Ot(e)?ai:ni;return t.test(Me(e))}function ci(e,t){return e==null?void 0:e[t]}function Te(e,t){var n=ci(e,t);return li(n)?n:void 0}var ui=Te(ie,"WeakMap");const $t=ui;var $n=Object.create,di=function(){function e(){}return function(t){if(!fe(t))return{};if($n)return $n(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const fi=di;function hi(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function pi(){}function gi(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var mi=800,yi=16,bi=Date.now;function vi(e){var t=0,n=0;return function(){var r=bi(),i=yi-(r-n);if(n=r,i>0){if(++t>=mi)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function wi(e){return function(){return e}}var Ei=function(){try{var e=Te(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const it=Ei;var ki=it?function(e,t){return it(e,"toString",{configurable:!0,enumerable:!1,value:wi(t),writable:!0})}:On,xi=vi(ki);const Pi=xi;function Si(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Ci(e){return e!==e}function Mi(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Ti(e,t,n){return t===t?Mi(e,t,n):Si(e,Ci,n)}function Oi(e,t){var n=e==null?0:e.length;return!!n&&Ti(e,t,0)>-1}var Bi=9007199254740991,$i=/^(?:0|[1-9]\d*)$/;function zn(e,t){var n=typeof e;return t=t==null?Bi:t,!!t&&(n=="number"||n!="symbol"&&$i.test(e))&&e>-1&&e%1==0&&e<t}function zt(e,t,n){t=="__proto__"&&it?it(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ve(e,t){return e===t||e!==e&&t!==t}var zi=Object.prototype,_i=zi.hasOwnProperty;function Ii(e,t,n){var r=e[t];(!(_i.call(e,t)&&Ve(r,n))||n===void 0&&!(t in e))&&zt(e,t,n)}function Ai(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],c=r?r(n[l],e[l],l,n,e):void 0;c===void 0&&(c=e[l]),i?zt(n,l,c):Ii(n,l,c)}return n}var _n=Math.max;function Li(e,t,n){return t=_n(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=_n(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),hi(e,this,l)}}function Ni(e,t){return Pi(Li(e,t,On),e+"")}var Di=9007199254740991;function In(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Di}function st(e){return e!=null&&In(e.length)&&!Ot(e)}function An(e,t,n){if(!fe(n))return!1;var r=typeof t;return(r=="number"?st(n)&&zn(t,n.length):r=="string"&&t in n)?Ve(n[t],e):!1}function Ln(e){return Ni(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&An(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var l=n[r];l&&e(t,l,r,s)}return t})}var ji=Object.prototype;function _t(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ji;return e===n}function Zi(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ri="[object Arguments]";function Nn(e){return be(e)&&Se(e)==Ri}var Dn=Object.prototype,Vi=Dn.hasOwnProperty,Hi=Dn.propertyIsEnumerable,Wi=Nn(function(){return arguments}())?Nn:function(e){return be(e)&&Vi.call(e,"callee")&&!Hi.call(e,"callee")};const It=Wi;function Fi(){return!1}var jn=typeof A=="object"&&A&&!A.nodeType&&A,Zn=jn&&typeof module=="object"&&module&&!module.nodeType&&module,Ui=Zn&&Zn.exports===jn,Rn=Ui?ie.Buffer:void 0,Gi=Rn?Rn.isBuffer:void 0,qi=Gi||Fi;const at=qi;var Xi="[object Arguments]",Ki="[object Array]",Yi="[object Boolean]",Ji="[object Date]",Qi="[object Error]",es="[object Function]",ts="[object Map]",ns="[object Number]",os="[object Object]",rs="[object RegExp]",is="[object Set]",ss="[object String]",as="[object WeakMap]",ls="[object ArrayBuffer]",cs="[object DataView]",us="[object Float32Array]",ds="[object Float64Array]",fs="[object Int8Array]",hs="[object Int16Array]",ps="[object Int32Array]",gs="[object Uint8Array]",ms="[object Uint8ClampedArray]",ys="[object Uint16Array]",bs="[object Uint32Array]",H={};H[us]=H[ds]=H[fs]=H[hs]=H[ps]=H[gs]=H[ms]=H[ys]=H[bs]=!0,H[Xi]=H[Ki]=H[ls]=H[Yi]=H[cs]=H[Ji]=H[Qi]=H[es]=H[ts]=H[ns]=H[os]=H[rs]=H[is]=H[ss]=H[as]=!1;function vs(e){return be(e)&&In(e.length)&&!!H[Se(e)]}function ws(e){return function(t){return e(t)}}var Vn=typeof A=="object"&&A&&!A.nodeType&&A,He=Vn&&typeof module=="object"&&module&&!module.nodeType&&module,Es=He&&He.exports===Vn,At=Es&&Ie.process,ks=function(){try{var e=He&&He.require&&He.require("util").types;return e||At&&At.binding&&At.binding("util")}catch(t){}}();const Hn=ks;var Wn=Hn&&Hn.isTypedArray,xs=Wn?ws(Wn):vs;const Lt=xs;var Ps=Object.prototype,Ss=Ps.hasOwnProperty;function Fn(e,t){var n=Ce(e),r=!n&&It(e),i=!n&&!r&&at(e),s=!n&&!r&&!i&&Lt(e),a=n||r||i||s,l=a?Zi(e.length,String):[],c=l.length;for(var d in e)(t||Ss.call(e,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||zn(d,c)))&&l.push(d);return l}function Un(e,t){return function(n){return e(t(n))}}var Cs=Un(Object.keys,Object);const Ms=Cs;var Ts=Object.prototype,Os=Ts.hasOwnProperty;function Bs(e){if(!_t(e))return Ms(e);var t=[];for(var n in Object(e))Os.call(e,n)&&n!="constructor"&&t.push(n);return t}function $s(e){return st(e)?Fn(e):Bs(e)}function zs(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var _s=Object.prototype,Is=_s.hasOwnProperty;function As(e){if(!fe(e))return zs(e);var t=_t(e),n=[];for(var r in e)r=="constructor"&&(t||!Is.call(e,r))||n.push(r);return n}function Gn(e){return st(e)?Fn(e,!0):As(e)}var Ls=Te(Object,"create");const We=Ls;function Ns(){this.__data__=We?We(null):{},this.size=0}function Ds(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var js="__lodash_hash_undefined__",Zs=Object.prototype,Rs=Zs.hasOwnProperty;function Vs(e){var t=this.__data__;if(We){var n=t[e];return n===js?void 0:n}return Rs.call(t,e)?t[e]:void 0}var Hs=Object.prototype,Ws=Hs.hasOwnProperty;function Fs(e){var t=this.__data__;return We?t[e]!==void 0:Ws.call(t,e)}var Us="__lodash_hash_undefined__";function Gs(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=We&&t===void 0?Us:t,this}function Oe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Oe.prototype.clear=Ns,Oe.prototype.delete=Ds,Oe.prototype.get=Vs,Oe.prototype.has=Fs,Oe.prototype.set=Gs;function qs(){this.__data__=[],this.size=0}function lt(e,t){for(var n=e.length;n--;)if(Ve(e[n][0],t))return n;return-1}var Xs=Array.prototype,Ks=Xs.splice;function Ys(e){var t=this.__data__,n=lt(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ks.call(t,n,1),--this.size,!0}function Js(e){var t=this.__data__,n=lt(t,e);return n<0?void 0:t[n][1]}function Qs(e){return lt(this.__data__,e)>-1}function ea(e,t){var n=this.__data__,r=lt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ge(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ge.prototype.clear=qs,ge.prototype.delete=Ys,ge.prototype.get=Js,ge.prototype.has=Qs,ge.prototype.set=ea;var ta=Te(ie,"Map");const Fe=ta;function na(){this.size=0,this.__data__={hash:new Oe,map:new(Fe||ge),string:new Oe}}function oa(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ct(e,t){var n=e.__data__;return oa(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ra(e){var t=ct(this,e).delete(e);return this.size-=t?1:0,t}function ia(e){return ct(this,e).get(e)}function sa(e){return ct(this,e).has(e)}function aa(e,t){var n=ct(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Be(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Be.prototype.clear=na,Be.prototype.delete=ra,Be.prototype.get=ia,Be.prototype.has=sa,Be.prototype.set=aa;function qn(e){return e==null?"":Sn(e)}function la(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var ca=Un(Object.getPrototypeOf,Object);const Xn=ca;var ua="[object Object]",da=Function.prototype,fa=Object.prototype,Kn=da.toString,ha=fa.hasOwnProperty,pa=Kn.call(Object);function Yn(e){if(!be(e)||Se(e)!=ua)return!1;var t=Xn(e);if(t===null)return!0;var n=ha.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Kn.call(n)==pa}function ga(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var ma=ie.isFinite,ya=Math.min;function ba(e){var t=Math[e];return function(n,r){if(n=rt(n),r=r==null?0:ya(Tn(r),292),r&&ma(n)){var i=(qn(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(qn(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var va=Math.ceil,wa=Math.max;function Nt(e,t,n){(n?An(e,t,n):t===void 0)?t=1:t=wa(Tn(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,s=0,a=Array(va(r/t));i<r;)a[s++]=ga(e,i,i+=t);return a}function Ea(){this.__data__=new ge,this.size=0}function ka(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function xa(e){return this.__data__.get(e)}function Pa(e){return this.__data__.has(e)}var Sa=200;function Ca(e,t){var n=this.__data__;if(n instanceof ge){var r=n.__data__;if(!Fe||r.length<Sa-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Be(r)}return n.set(e,t),this.size=n.size,this}function me(e){var t=this.__data__=new ge(e);this.size=t.size}me.prototype.clear=Ea,me.prototype.delete=ka,me.prototype.get=xa,me.prototype.has=Pa,me.prototype.set=Ca;var Jn=typeof A=="object"&&A&&!A.nodeType&&A,Qn=Jn&&typeof module=="object"&&module&&!module.nodeType&&module,Ma=Qn&&Qn.exports===Jn,eo=Ma?ie.Buffer:void 0,to=eo?eo.allocUnsafe:void 0;function Ta(e,t){if(t)return e.slice();var n=e.length,r=to?to(n):new e.constructor(n);return e.copy(r),r}function Oa(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Ba(){return[]}var $a=Object.prototype,za=$a.propertyIsEnumerable,no=Object.getOwnPropertySymbols,_a=no?function(e){return e==null?[]:(e=Object(e),Oa(no(e),function(t){return za.call(e,t)}))}:Ba;const Ia=_a;function Aa(e,t,n){var r=t(e);return Ce(e)?r:la(r,n(e))}function oo(e){return Aa(e,$s,Ia)}var La=Te(ie,"DataView");const Dt=La;var Na=Te(ie,"Promise");const jt=Na;var Da=Te(ie,"Set");const Ae=Da;var ro="[object Map]",ja="[object Object]",io="[object Promise]",so="[object Set]",ao="[object WeakMap]",lo="[object DataView]",Za=Me(Dt),Ra=Me(Fe),Va=Me(jt),Ha=Me(Ae),Wa=Me($t),$e=Se;(Dt&&$e(new Dt(new ArrayBuffer(1)))!=lo||Fe&&$e(new Fe)!=ro||jt&&$e(jt.resolve())!=io||Ae&&$e(new Ae)!=so||$t&&$e(new $t)!=ao)&&($e=function(e){var t=Se(e),n=t==ja?e.constructor:void 0,r=n?Me(n):"";if(r)switch(r){case Za:return lo;case Ra:return ro;case Va:return io;case Ha:return so;case Wa:return ao}return t});const co=$e;var Fa=ie.Uint8Array;const ut=Fa;function Ua(e){var t=new e.constructor(e.byteLength);return new ut(t).set(new ut(e)),t}function Ga(e,t){var n=t?Ua(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function qa(e){return typeof e.constructor=="function"&&!_t(e)?fi(Xn(e)):{}}var Xa="__lodash_hash_undefined__";function Ka(e){return this.__data__.set(e,Xa),this}function Ya(e){return this.__data__.has(e)}function Ue(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Be;++t<n;)this.add(e[t])}Ue.prototype.add=Ue.prototype.push=Ka,Ue.prototype.has=Ya;function Ja(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function uo(e,t){return e.has(t)}var Qa=1,el=2;function fo(e,t,n,r,i,s){var a=n&Qa,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var f=-1,h=!0,g=n&el?new Ue:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var E=e[f],x=t[f];if(r)var k=a?r(x,E,f,t,e,s):r(E,x,f,e,t,s);if(k!==void 0){if(k)continue;h=!1;break}if(g){if(!Ja(t,function(m,v){if(!uo(g,v)&&(E===m||i(E,m,n,r,s)))return g.push(v)})){h=!1;break}}else if(!(E===x||i(E,x,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}function tl(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Zt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var nl=1,ol=2,rl="[object Boolean]",il="[object Date]",sl="[object Error]",al="[object Map]",ll="[object Number]",cl="[object RegExp]",ul="[object Set]",dl="[object String]",fl="[object Symbol]",hl="[object ArrayBuffer]",pl="[object DataView]",ho=ye?ye.prototype:void 0,Rt=ho?ho.valueOf:void 0;function gl(e,t,n,r,i,s,a){switch(n){case pl:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hl:return!(e.byteLength!=t.byteLength||!s(new ut(e),new ut(t)));case rl:case il:case ll:return Ve(+e,+t);case sl:return e.name==t.name&&e.message==t.message;case cl:case dl:return e==t+"";case al:var l=tl;case ul:var c=r&nl;if(l||(l=Zt),e.size!=t.size&&!c)return!1;var d=a.get(e);if(d)return d==t;r|=ol,a.set(e,t);var u=fo(l(e),l(t),r,i,s,a);return a.delete(e),u;case fl:if(Rt)return Rt.call(e)==Rt.call(t)}return!1}var ml=1,yl=Object.prototype,bl=yl.hasOwnProperty;function vl(e,t,n,r,i,s){var a=n&ml,l=oo(e),c=l.length,d=oo(t),u=d.length;if(c!=u&&!a)return!1;for(var f=c;f--;){var h=l[f];if(!(a?h in t:bl.call(t,h)))return!1}var g=s.get(e),E=s.get(t);if(g&&E)return g==t&&E==e;var x=!0;s.set(e,t),s.set(t,e);for(var k=a;++f<c;){h=l[f];var m=e[h],v=t[h];if(r)var w=a?r(v,m,h,t,e,s):r(m,v,h,e,t,s);if(!(w===void 0?m===v||i(m,v,n,r,s):w)){x=!1;break}k||(k=h=="constructor")}if(x&&!k){var b=e.constructor,p=t.constructor;b!=p&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof p=="function"&&p instanceof p)&&(x=!1)}return s.delete(e),s.delete(t),x}var wl=1,po="[object Arguments]",go="[object Array]",dt="[object Object]",El=Object.prototype,mo=El.hasOwnProperty;function kl(e,t,n,r,i,s){var a=Ce(e),l=Ce(t),c=a?go:co(e),d=l?go:co(t);c=c==po?dt:c,d=d==po?dt:d;var u=c==dt,f=d==dt,h=c==d;if(h&&at(e)){if(!at(t))return!1;a=!0,u=!1}if(h&&!u)return s||(s=new me),a||Lt(e)?fo(e,t,n,r,i,s):gl(e,t,c,n,r,i,s);if(!(n&wl)){var g=u&&mo.call(e,"__wrapped__"),E=f&&mo.call(t,"__wrapped__");if(g||E){var x=g?e.value():e,k=E?t.value():t;return s||(s=new me),i(x,k,n,r,s)}}return h?(s||(s=new me),vl(e,t,n,r,i,s)):!1}function yo(e,t,n,r,i){return e===t?!0:e==null||t==null||!be(e)&&!be(t)?e!==e&&t!==t:kl(e,t,n,r,yo,i)}function xl(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),l=a.length;l--;){var c=a[e?l:++i];if(n(s[c],c,s)===!1)break}return t}}var Pl=xl();const Sl=Pl;var Cl=function(){return ie.Date.now()};const Vt=Cl;var Ml="Expected a function",Tl=Math.max,Ol=Math.min;function Bl(e,t,n){var r,i,s,a,l,c,d=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(Ml);t=rt(t)||0,fe(n)&&(u=!!n.leading,f="maxWait"in n,s=f?Tl(rt(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function g(y){var S=r,C=i;return r=i=void 0,d=y,a=e.apply(C,S),a}function E(y){return d=y,l=setTimeout(m,t),u?g(y):a}function x(y){var S=y-c,C=y-d,O=t-S;return f?Ol(O,s-C):O}function k(y){var S=y-c,C=y-d;return c===void 0||S>=t||S<0||f&&C>=s}function m(){var y=Vt();if(k(y))return v(y);l=setTimeout(m,x(y))}function v(y){return l=void 0,h&&r?g(y):(r=i=void 0,a)}function w(){l!==void 0&&clearTimeout(l),d=0,r=c=i=l=void 0}function b(){return l===void 0?a:v(Vt())}function p(){var y=Vt(),S=k(y);if(r=arguments,i=this,c=y,S){if(l===void 0)return E(c);if(f)return clearTimeout(l),l=setTimeout(m,t),g(c)}return l===void 0&&(l=setTimeout(m,t)),a}return p.cancel=w,p.flush=b,p}function Ht(e,t,n){(n!==void 0&&!Ve(e[t],n)||n===void 0&&!(t in e))&&zt(e,t,n)}function $l(e){return be(e)&&st(e)}function Wt(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function zl(e){return Ai(e,Gn(e))}function _l(e,t,n,r,i,s,a){var l=Wt(e,n),c=Wt(t,n),d=a.get(c);if(d){Ht(e,n,d);return}var u=s?s(l,c,n+"",e,t,a):void 0,f=u===void 0;if(f){var h=Ce(c),g=!h&&at(c),E=!h&&!g&&Lt(c);u=c,h||g||E?Ce(l)?u=l:$l(l)?u=gi(l):g?(f=!1,u=Ta(c,!0)):E?(f=!1,u=Ga(c,!0)):u=[]:Yn(c)||It(c)?(u=l,It(l)?u=zl(l):(!fe(l)||Ot(l))&&(u=qa(c))):f=!1}f&&(a.set(c,u),i(u,c,r,s,a),a.delete(c)),Ht(e,n,u)}function Ft(e,t,n,r,i){e!==t&&Sl(t,function(s,a){if(i||(i=new me),fe(s))_l(e,t,a,n,Ft,r,i);else{var l=r?r(Wt(e,a),s,a+"",e,t,i):void 0;l===void 0&&(l=s),Ht(e,a,l)}},Gn)}var Il=Ln(function(e,t,n,r){Ft(e,t,n,r)});const Al=Il;function Ll(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ve(e,t){return yo(e,t)}var Nl=Ln(function(e,t,n){Ft(e,t,n)});const bo=Nl;var Dl=ba("round");const vo=Dl;var jl=1/0,Zl=Ae&&1/Zt(new Ae([,-0]))[1]==jl?function(e){return new Ae(e)}:pi;const Rl=Zl;var Vl=200;function Hl(e,t,n){var r=-1,i=Oi,s=e.length,a=!0,l=[],c=l;if(n)a=!1,i=Ll;else if(s>=Vl){var d=t?null:Rl(e);if(d)return Zt(d);a=!1,i=uo,c=new Ue}else c=t?[]:l;e:for(;++r<s;){var u=e[r],f=t?t(u):u;if(u=n||u!==0?u:0,a&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(u)}else i(c,f,n)||(c!==l&&c.push(f),l.push(u))}return l}function Wl(e){return e&&e.length?Hl(e):[]}class B{static value(t,n){return t instanceof Function?t(n):t}static values(t,n){return Object.values(t).filter(r=>r instanceof Function).length===0?t:Object.fromEntries(Object.entries(t).map(([r,i])=>[r,i instanceof Function?i(n):i]))}}var z=(e=>(e.CENTER="center",e.NORTH="north",e.NORTH_EAST="north-east",e.EAST="east",e.SOUTH_EAST="south-east",e.SOUTH="south",e.SOUTH_WEST="south-west",e.WEST="west",e.NORTH_WEST="north-west",e))(z||{});function ft(e){const t={};return Object.assign(t,e(t))}function Fl(e){return e}function Ul(e){return e}function wo(e,t,n){const r=B.values(t.normal,e);return r.type=="circle"?{width:r.radius*2*n,height:r.radius*2*n}:{width:r.width*n,height:r.height*n}}function Gl(e,t,n,r){const s=Math.abs(e.x-n.x)<t.width/2+r.width/2,l=Math.abs(e.y-n.y)<t.height/2+r.height/2;return s&&l}function Ge(e,t){let n=0;return t===1||e===void 0||e==="none"?n=e!=null?e:0:typeof e=="string"?n=e.split(/\s+/).map(r=>parseInt(r)*t).filter(r=>!isNaN(r)).join(" "):n=e*t,n&&n!=="0"?n:void 0}function ht(e){let t=0;if(e===void 0||e==="none")t=0;else if(typeof e=="string"){const n=e.split(/\s+/).map(r=>parseInt(r)).filter(r=>!isNaN(r));n.length%2===0?t=n.reduce((r,i)=>r+i,0):t=n.reduce((r,i)=>r+i,0)*2}else t=e*2;return t}const Eo=20;class Ut{activate(t){const{nodePositions:n,nodes:r,configs:i,emitter:s,scale:a,svgPanZoom:l}=t,c=f=>{for(const[h,g]of Object.entries(f)){const E=this.getOrCreateNodePosition(n,h);this.setNodePosition(E,g)}},d=f=>{const h=f.filter(x=>!(x in n.value)),g=l.getViewArea(),E=a.value;for(const x of h){const k=r.value[x],m=wo(k,i.node,E),v=J({},g.center);for(;;){let b=!1;for(const[p,y]of Object.entries(n.value)){if(x===p)continue;const S=r.value[p];if(!S)continue;const C=wo(S,i.node,E);if(b=Gl(v,m,y,C),b)break}if(b)v.x+=m.width+Eo*E,v.x+m.width/2>g.box.right&&(v.x=g.center.x,v.y+=m.height+Eo*E);else break}const w=this.getOrCreateNodePosition(n,x);this.setNodePosition(w,v)}};d(Object.keys(r.value));const u=o.watch(()=>ve(new Set(Object.keys(r.value)),new Set(Object.keys(n.value))),f=>{f||d(Object.keys(r.value))});s.on("node:dragstart",c),s.on("node:pointermove",c),s.on("node:dragend",c),this.onDeactivate=()=>{u(),s.off("node:dragstart",c),s.off("node:pointermove",c),s.off("node:dragend",c)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(t,n){t.value.x=vo(n.x,3),t.value.y=vo(n.y,3)}getOrCreateNodePosition(t,n){const r=o.toRef(t.value,n);return r.value||(r.value={x:0,y:0}),r}}function ko(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",autoPanOnResize:!0,layoutHandler:new Ut,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:e=>{const t=/Mac OS/.test(navigator.userAgent)?e.metaKey:e.ctrlKey;return e.type==="keydown"?t:!t}},builtInLayerOrder:[],onBeforeInitialDisplay:void 0},node:ft(e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>B.value(e.normal.type,t),radius:t=>{var n;return((n=B.value(e.normal.radius,t))!=null?n:0)+2},width:t=>{var n;return((n=B.value(e.normal.width,t))!=null?n:0)+2},height:t=>{var n;return((n=B.value(e.normal.height,t))!=null?n:0)+2},borderRadius:t=>{var n;return(n=B.value(e.normal.borderRadius,t))!=null?n:0},strokeWidth:t=>B.value(e.normal.strokeWidth,t),strokeColor:t=>B.value(e.normal.strokeColor,t),strokeDasharray:t=>B.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:z.SOUTH,directionAutoAdjustment:!1,text:"name",handleNodeEvents:!0},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:ft(e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>B.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>B.value(e.normal.dasharray,t),linecap:t=>B.value(e.normal.linecap,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selected:{width:t=>B.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=B.value(e.normal.width,t);return`${n*1.5} ${n*2}`},linecap:t=>B.value(e.normal.linecap,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null}},margin:null,summarize:(t,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:ft(e=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:o.reactive({width:6,color:t=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],r=t.edges.map(i=>i.split("").reduce((s,a)=>(s=(s<<5)-s+a.charCodeAt(0),s&s),0)).reduce((i,s)=>i+s,0);return n[Math.abs(r)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:t=>B.value(e.path.width,t),color:t=>B.value(e.path.color,t),dasharray:t=>B.value(e.path.dasharray,t),linecap:t=>B.value(e.path.linecap,t),linejoin:t=>B.value(e.path.linejoin,t),animate:t=>B.value(e.path.animate,t),animationSpeed:t=>B.value(e.path.animationSpeed,t)},hover:{width:t=>B.value(e.normal.width,t)+2,color:t=>B.value(e.normal.color,t),dasharray:t=>B.value(e.normal.dasharray,t),linecap:t=>B.value(e.normal.linecap,t),linejoin:t=>B.value(e.normal.linejoin,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selected:{width:t=>B.value(e.normal.width,t)+2,color:t=>B.value(e.normal.color,t),dasharray:"6 12",linecap:t=>B.value(e.normal.linecap,t),linejoin:t=>B.value(e.normal.linejoin,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}function ql(e){const t=ko();return e&&bo(t,e),t}const xo=Symbol("style");function Xl(e,t){return Yn(e)?bo(e,t):t}function Kl(e){const t=o.reactive(ko()),n=Object.keys(t);for(const r of n)o.watch(()=>e.value[r],()=>{Al(t[r],e.value[r]||{},Xl)},{immediate:!0,deep:!0});return o.provide(xo,t),t}function pt(e){return Z(o.inject(xo),`Configs(${e})`)[e]}function Yl(){return pt("view")}function gt(){return pt("node")}function mt(){return pt("edge")}function Po(){return pt("path")}let Jl=1;function Ql(){return Jl++}function ee(e){return Object.entries(e)}function yt(e,t){const n=new Set(Object.keys(e));ee(t).forEach(([r,i])=>{ve(e[r],i)||(e[r]=i),n.delete(r)}),n.forEach(r=>delete e[r])}function ec(e){return e instanceof Promise||e&&typeof e.then=="function"}function tc(e,t,n){const r=de({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return o.watchEffect(()=>{const{edgeLayoutPoints:i,edgeGroups:s}=oc(n,e.value,t.value);yt(r.edgeLayoutPoints,i),yt(r.edgeGroups,s)}),o.watchEffect(()=>{const i={};for(const[s,{edges:a,groupWidth:l}]of Object.entries(r.edgeGroups)){let c=!1;if(l==0)c=!1;else if(n.edge.summarize instanceof Function){const d=n.edge.summarize(a,n);d===null?c=So(e.value,a,n,l):c=d}else n.edge.summarize?c=So(e.value,a,n,l):c=!1;r.edgeGroups[s].summarize=c,c&&Object.keys(a).forEach(d=>i[d]=!0)}yt(r.summarizedEdges,i)}),r}function nc(e,t,n,r,i,s){return e?t?Co(e.edge,n,r,i,0,0,s):Co(e.edge,n,r,i,e.groupWidth,e.pointInGroup,s):{p1:{x:0,y:0},p2:{x:0,y:0}}}function oc(e,t,n){const r={},i={},s={};for(const[l,c]of Object.entries(n)){if(!(c.source in t&&c.target in t))continue;const d=[c.source,c.target].sort().join("<=>"),u=s[d]||{};u[l]=c,s[d]=u}const a=e.edge.gap instanceof Function?e.edge.gap:(l,c)=>e.edge.gap;for(const[l,c]of Object.entries(s)){const d=Object.keys(c).length;if(d==0)continue;const u=a(c,e),[f,h]=Object.entries(c)[0];if(d===1)r[f]={edge:h,pointInGroup:0,groupWidth:0},i[l]={edges:c,groupWidth:0,summarize:!1};else{let g=0;const E=Object.entries(c).map(([m,v])=>{let w=B.value(e.edge.normal.width,v);return isNaN(+w)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",m,w),w=1),w/2}),x=Object.entries(c).map(([m,v],w)=>(w>0&&(g+=E[w-1]+u+E[w]),[m,v,g])),k=g;x.forEach(([m,v,w])=>{r[m]={edge:v,pointInGroup:w,groupWidth:k}}),i[l]={edges:c,groupWidth:k,summarize:!1}}}return{edgeLayoutPoints:r,edgeGroups:i}}function So(e,t,n,r){if(Object.entries(t).length===1)return!1;const s=Math.min(...Object.values(t).flatMap(a=>[e[a.source],e[a.target]]).filter(a=>a).map(a=>{const l=B.values(n.node.normal,a);return l.type==="circle"?l.radius*2:Math.min(l.width,l.height)}));return r>s}function Co(e,t,n,r,i,s,a){var f,h,g,E,x,k,m,v;let l,c,d,u;return e.source<e.target?[l,c,d,u]=Mo((f=t==null?void 0:t.x)!=null?f:0,(h=t==null?void 0:t.y)!=null?h:0,(g=n==null?void 0:n.x)!=null?g:0,(E=n==null?void 0:n.y)!=null?E:0,r,i,s,a):[d,u,l,c]=Mo((x=n==null?void 0:n.x)!=null?x:0,(k=n==null?void 0:n.y)!=null?k:0,(m=t==null?void 0:t.x)!=null?m:0,(v=t==null?void 0:t.y)!=null?v:0,r,i,s,a),{p1:{x:l,y:c},p2:{x:d,y:u}}}function Mo(e,t,n,r,i,s,a,l){const c=n-e,d=r-t;let u=(s/2-a)*i;if(u!==0&&l!=="clock"){const f=Math.atan2(r-t,n-e);if(l==="vertical"){const h=Math.PI/2;(f<-h||f>=h)&&(u*=-1)}else l==="horizontal"&&f<0&&(u*=-1)}if(c===0){const f=d<0?-1:1;return[e+u*f,t,n+u*f,r]}else if(d===0){const f=c<0?1:-1;return[e,t+u*f,n,r+u*f]}else{const h=-1/(d/c);d<0&&(u=-u);const g=u/Math.sqrt(1+Math.pow(h,2));return[e+g,t+g*h,n+g,r+g*h]}}function To(e,t,n){return n||(n={x:0,y:0}),n.x=e.x+t.x,n.y=e.y+t.y,n}function Gt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x-t.x,n.y=e.y-t.y,n}function Oo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t.x,n.y=e.y*t.y,n}function Bo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t,n.y=e.y*t,n}function qt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x/t.x,n.y=e.y/t.y,n}function $o(e,t){return e.x*t.x+e.y*t.y}function zo(e,t){return e.x*t.y-e.y*t.x}function Xt(e){return e.x*e.x+e.y*e.y}function Kt(e){return Math.sqrt(Xt(e))}function Yt(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function _o(e,t){return Math.sqrt(Yt(e,t))}function Io(e,t){t||(t={x:0,y:0});const n=Kt(e);return n===0?(t.x=1,t.y=0):qt(e,{x:n,y:n},t),t}function bt(e,t,n){n||(n={x:0,y:0});const r=e.x*Math.cos(t)-e.y*Math.sin(t),i=e.x*Math.sin(t)+e.y*Math.cos(t);return n.x=r,n.y=i,n}const rc=180/Math.PI;function ic(e){return e*rc}function Jt(e){return Math.atan2(e.y,e.x)}function Qt(e){return ic(Jt(e))}const sc=Object.freeze(Object.defineProperty({__proto__:null,add:To,angle:Jt,angleDegree:Qt,cross:zo,distance:_o,distanceSquared:Yt,divide:qt,dot:$o,length:Kt,lengthSquared:Xt,multiply:Oo,multiplyScalar:Bo,normalize:Io,rotate:bt,subtract:Gt},Symbol.toStringTag,{value:"Module"}));class D{static fromArray(t){return new D(t[0]||0,t[1]||0)}static fromObject(t){return new D(t.x,t.y)}constructor(t,n){this.x=t,this.y=n}add(t){return To(this,t,this)}subtract(t){return Gt(this,t,this)}multiply(t){return Oo(this,t,this)}multiplyScalar(t){return Bo(this,t,this)}divide(t){return qt(this,t,this)}dot(t){return $o(this,t)}cross(t){return zo(this,t)}lengthSquared(){return Xt(this)}length(){return Kt(this)}distanceSquared(t){return Yt(this,t)}distance(t){return _o(this,t)}normalize(){return Io(this,this)}angle(){return Jt(this)}angleDegree(){return Qt(this)}rotate(t){return bt(this,t,this)}isEqualTo(t){return this.x===t.x&&this.y===t.y}clone(){return new D(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}const U=J({Vector2D:D},sc);class W{constructor(t,n,r){this.source=t,this.target=n,this.v=r}static fromLinePosition(t){const n=D.fromObject(t.p1),r=D.fromObject(t.p2);return new W(n,r,Le(n,r))}static fromPositions(t,n){const r=D.fromObject(t),i=D.fromObject(n);return new W(r,i,Le(r,i))}static fromVectors(t,n){return new W(t,n,Le(t,n))}}function Le(e,t){return t.clone().subtract(e)}function ac(e){return[D.fromObject(e.p1),D.fromObject(e.p2)]}function lc(e){return new D((e.p1.x+e.p2.x)/2,(e.p1.y+e.p2.y)/2)}function vt(e,t){return{p1:e,p2:t}}function en(e,t,n){const r=W.fromLinePosition(e);return cc(r,t,n)}function cc(e,t,n){const r=e.v.clone().normalize(),i=e.source.clone().add(r.clone().multiplyScalar(t)),s=e.target.clone().subtract(r.clone().multiplyScalar(n));let a=i.toObject(),l=s.toObject();const c=Le(i,s);if(e.v.angle()*c.angle()<0){const d=new D((a.x+l.x)/2,(a.y+l.y)/2),u=d.clone().add(r.multiplyScalar(.5));a=d.toObject(),l=u.toObject()}return{p1:a,p2:l}}function uc(e){return{p1:e.p2,p2:e.p1}}function qe(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return W.fromVectors(e.target,e.target.clone().add(t))}function tn(e,t){const n=t.v.clone().normalize(),r=t.source,i=U.subtract(e,r),s=n.dot(i);return r.clone().add(n.multiplyScalar(s))}function wt(e,t,n,r){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const a=W.fromVectors(e,t),l=tn(n,a),c=U.length(U.subtract(l,n));if(r<c)return null;if(r===c)return l;const d=Math.sqrt(Q(r,2)-Q(c,2)),u=a.v.normalize().multiplyScalar(d);return l.subtract(u)}function dc(e,t,n,r,i){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const l=W.fromVectors(e,t),c=tn(n,l),d=U.length(U.subtract(c,n));if(r<d)return null;if(r===d)return c;const u=Math.sqrt(Q(r,2)-Q(d,2)),f=l.v.normalize().multiplyScalar(u),h=c.clone().add(f),g=c.clone().subtract(f),E=i.distance(h),x=i.distance(g);return Math.abs(E-x)<2?g:E<x?h:g}function ze(e,t){const n=U.subtract(t.source,e.source),r=e.v,i=t.v,s=U.cross(n,r)/U.cross(r,i);return t.source.clone().add(i.clone().multiplyScalar(s))}function Xe(e,t,n,r,i){const s=e,l=n.clone().subtract(s),c=l.length(),d=t+r;if(d<c)return null;const u=Math.abs(t-r);if(c<u)return null;if(c===d){const y=l.clone().normalize(),S=e.clone().add(y.multiplyScalar(t));return i?S:[S,S]}if(c===u){const y=l.clone().normalize(),S=t>r,C=e.clone().add(y.multiplyScalar(S?t:-t));return i?C:[C,C]}const f=t,h=r,g=(Q(c,2)+Q(f,2)-Q(h,2))/(2*c*f),E=f*g,x=Math.sqrt(Q(f,2)-Q(E,2)),k=l.clone().normalize(),m=new D(-k.y,k.x),v=k.clone().multiplyScalar(E),w=m.clone().multiplyScalar(x),b=e.clone().add(v).add(w),p=e.clone().add(v).subtract(w);if(i){const y=b.distance(i),S=p.distance(i);return y<S?b:p}else return[b,p]}function Ao(e,t,n,r){const i=W.fromPositions(e,t),s=(n.width+n.strokeWidth)/2*r,a=(n.height+n.strokeWidth)/2*r,l=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*r:0,c=(i.v.angle()-Math.PI/2)%Math.PI,d=Math.PI/2-c%Math.PI,u=a*Math.abs(Math.tan(c)),f=s*Math.abs(Math.tan(d)),h=u<=s-l,g=f<=a-l;if(h||g||l===0)return Math.sqrt(h?Q(a,2)+Q(u,2):Q(s,2)+Q(f,2));{const E=t.x-s+l,x=t.y-a+l,k=t.x+s-l,m=t.y+a-l,v=[new D(E,x),new D(k,x),new D(k,m),new D(E,m)],w=Math.floor((i.v.angleDegree()+360)%360/90),b=v[w],p=wt(i.source,tn(b,i),b,l);return p?Le(p,i.target).length():Le(b,i.target).length()+l}}function Lo(e,t,n,r,i){const s=W.fromLinePosition(e),a=s.v.clone().normalize(),l=r===0?s.source:s.source.clone().add(a.clone().multiplyScalar(r*i)),c=r===0?s.target:s.target.clone().subtract(a.clone().multiplyScalar(r*i)),d=(t.width/2+n)*i,u=new D(-a.y,a.x).multiplyScalar(d);let f=U.subtract(l,u),h=U.add(l,u),g=U.subtract(c,u),E=U.add(c,u);const x=s.v.angleDegree();return(x<-90||x>=90)&&([f,h]=[h,f],[g,E]=[E,g]),{source:{above:f,below:h},target:{above:g,below:E}}}function fc(e,t,n,r){let i;n.type==="circle"?i=n.radius+n.strokeWidth/2:i=Ao(t,e,n,1);let s;return r.type==="circle"?s=r.radius+r.strokeWidth/2:s=Ao(e,t,r,1),[i,s]}function we(e,t,n){const{x:r,y:i}=e,s=r-t.x,a=i-t.y;return{x:s*Math.cos(n)-a*Math.sin(n)+t.x,y:s*Math.sin(n)+a*Math.cos(n)+t.y}}function nn(e){return e>0?-(Math.PI*2-e):Math.PI*2+e}function on(e,t,n,r){const i=[],s=W.fromVectors(t,e),a=W.fromVectors(t,n);let l=Ne(s,a);r*l<0&&(l=nn(l));const c=D.fromObject(we(e,t,-l/2)),d=W.fromVectors(t,c),u=qe(d),f=Ne(s,d);let h=qe(s);if(Math.abs(f)<Math.PI/2){const E=ze(h,u);i.push(E)}else{const E=D.fromObject(we(c,t,f/2)),x=qe(W.fromVectors(t,D.fromObject(E))),k=ze(h,x),m=ze(x,u);i.push(k,E,m)}i.push(c);const g=Ne(a,d);if(h=qe(a),Math.abs(g)<Math.PI/2){const E=ze(h,u);i.push(E)}else{const E=D.fromObject(we(c,t,g/2)),x=qe(W.fromVectors(t,D.fromObject(E))),k=ze(u,x),m=ze(x,h);i.push(k,E,m)}return i}function Ne(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function hc(e,t,n){const r=e.x,i=e.y,s=t.x,a=t.y,l=n.x,c=n.y,d=r-s,u=i-a,f=l-s,h=c-a;if(d===0&&u===0||f===0&&h===0)return[e,0];const g=(h*(d*(r+s)+u*(i+a))-u*(f*(l+s)+h*(c+a)))/(2*d*h-2*u*f),E=(-f*(d*(r+s)+u*(i+a))+d*(f*(l+s)+h*(c+a)))/(2*d*h-2*u*f),x=Math.sqrt(Math.pow(r-g,2)+Math.pow(i-E,2));return[new D(g,E),x]}function De(e){return e.type=="circle"?e.radius:Math.min(e.width,e.height)/2}function Et(...e){return e.find(t=>!!t)}const pc=Number.EPSILON*100;function gc(e,t,n,r,i,s,a,l){var x,k;const c=e.edges,d=e.directions,u=c.map((m,v)=>yc(m,d[v],r[m.edgeId])),f=[];let h=!1,g=!1;{const m=u[0];let v=De(t[m.source].shape)*i;const w=l+(a==="edgeOfNode"?v:0),b=w<=0?m.line.source:jo(m,w,n,!0);f.push(b),v=De(t[m.target].shape)*i,l>0&&U.distance(m.line.source,m.line.target)<=w+v&&(h=!0)}const E=c.length;for(let m=1;m<E;m++){const v=u[m-1],w=u[m],b=w.source,p=D.fromObject((x=n[b])!=null?x:{x:0,y:0}),y=mc(v,w,p),S=De(t[b].shape)*i,C=Math.max(S*(2/3),S-4*i),O=rn(v),M=rn(w),T=kt(v,p,C,O),$=kt(w,p,C,!M),N=kt(v,p,S,O),F=kt(w,p,S,!M);let L;if(y){const V=U.distance(y,p);if(V<C)L=[Et(T,N,v.line.target),y,Et($,F,w.line.source)];else if(V<=S){let ae,X;N&&T?ae=U.distance(y,T)<U.distance(y,N)?T:N:ae=N||v.line.target,F&&$?X=U.distance(y,$)<U.distance(y,F)?$:F:X=F||w.line.source,L=[ae,y,X]}else T&&$?L=[T,p,$]:N&&F?L=[N,p,F]:L=[Et(T,N,v.line.target),p,Et($,F,w.line.source)]}else T&&$?L=[T,p,$]:N&&F?L=[N,p,F]:L=[v.line.target,p,w.line.source];if(v.curve){const V=f[f.length-1];if(V){const ae=V instanceof Array?V[V.length-1]:V;let X;L instanceof Array?X=s?L[0]:L[1]:X=L;const he=on(ae,v.curve.circle.center,X,v.curve.theta);L instanceof Array&&s?f.push([...he,...L]):f.push([...he,X])}}else if(v.loop){const[V,ae,X]=Ro(p,v,S);f.push(V),f.push(X),L instanceof Array&&s?f.push([ae,L[1],L[2]]):f.push(L[2])}else s||!(L instanceof Array)?f.push(L):w.curve?f.push(L[1]):w.loop?f.push(L[0]):f.push(L[0],L[2])}{const m=u[u.length-1];let v=De(t[m.target].shape)*i;const w=l+(a==="edgeOfNode"?v:0),b=w<=0?m.line.target:jo(m,w,n,!1);if(v=De(t[m.source].shape)*i,m.loop){const p=D.fromObject((k=n[m.target])!=null?k:{x:0,y:0}),[y,S,C]=Ro(p,m,v);f.push(y),f.push(C)}else if(m.curve){const p=f[f.length-1],y=p instanceof Array?p[p.length-1]:p,S=on(y,m.curve.circle.center,b,m.curve.theta);f.push([...S,b])}else f.push(b);l>0&&U.distance(m.line.source,m.line.target)<=w+v&&(g=!0)}return h&&(f.shift(),f[0]instanceof Array&&f.unshift(f[0][0])),g&&f.pop(),f}function No(e){const t=e.length;if(t===0)return[];if(t<=1)return[!0];const n=[];let r=null,i=!0;for(let s=0;s<t;s++){const a=e[s].edge.source,l=e[s].edge.target;if(s===0)if(t>2){const c=Do(e,0);c===null?i=!0:i=c===l}else i=[e[1].edge.source,e[1].edge.target].includes(l);else a===l?i=!0:i=r===a;n.push(i),r=i?l:a}return n}function Do(e,t){const n=e[t],r=e[t+1],i=[n.edge.source,n.edge.target].sort(),s=[r.edge.source,r.edge.target].sort();if(i[0]===i[1])return i[0];if(s[0]===s[1])return s[0];if(n.edgeId===r.edgeId||i[0]===s[0]&&i[1]===s[1]){if(t>=e.length-2)return null;{const a=Do(e,t+1);return a===null?null:a===i[1]?i[0]:i[1]}}else return s.includes(i[1])?i[1]:i[0]}function jo(e,t,n,r){const i=r?e.source:e.target,s=e.curve;if(s){let a=t/s.circle.radius;return s.theta>0&&(a*=-1),r||(a*=-1),D.fromObject(we(r?e.line.source:e.line.target,s.circle.center,a))}else{let a,l;if(r?(a=e.line.target,l=e.line.source):(a=e.line.source,l=e.line.target),n[i]){const c=wt(a,l,D.fromObject(n[i]),t);return c===null?a:c}else return a}}function mc(e,t,n){let r=null;if(e.loop||t.loop)r=null;else if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();r=Xe(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else r=dc(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)r=wt(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const i=Zo(e.line),s=Zo(t.line);!isFinite(i)&&!isFinite(s)||Math.abs(i-s)<pc?r=null:r=ze(e.line,t.line)}return r}function kt(e,t,n,r){if(e.loop){const i=Xe(t,n,e.loop.center,e.loop.radius[0]);return i?r?i[0]:i[1]:null}else return e.curve?Xe(t,n,e.curve.circle.center,e.curve.circle.radius,D.fromObject(e.curve.center)):wt(r?e.line.source:e.line.target,r?e.line.target:e.line.source,t,n)}function yc(e,t,n){let r=n.origin,i=e.edge.source,s=e.edge.target,a=n.curve;const l=n.loop;l?r=n.position:t||(r=uc(r),i=e.edge.target,s=e.edge.source,a&&(a=nt(J({},a),{theta:-a.theta})));const c=W.fromLinePosition(r);return{edgeId:e.edgeId,source:i,target:s,line:c,direction:t,curve:a,loop:l}}function Zo(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}function Ro(e,t,n){const{radius:r,center:i}=Z(t.loop,"Loop of edge parameter"),[s,a]=r,l=Xe(e,n,i,r[0]);let[c,d]=l?l.reverse():[t.line.source,t.line.target];const u=rn(t);u||([c,d]=[d,c]);const f=c,h=d,g=D.fromObject(f).subtract(i).angleDegree();let k=(D.fromObject(h).subtract(i).angleDegree()+360-g)%360>=180;return k=u?k:!k,[f,h,`A ${s} ${a} 0 ${k?1:0} ${u?1:0} ${h.x} ${h.y}`]}function rn(e){return e.loop?e.direction?e.loop.isClockwise:!e.loop.isClockwise:!0}function sn(e,t,n,r,i,s,a){const l=o.reactive({});o.watch(()=>new Set(Object.keys(e.value)),(d,u)=>{u||(u=new Set([]));for(const f of d)u.has(f)||bc(e,l,f,!1,t,i);for(const f of u)d.has(f)||(n.delete(f),r.delete(f),s==null||s(f,l[f]),delete l[f])},{immediate:!0}),o.watch(()=>[...n],(d,u)=>{const f=u?d.filter(g=>!u.includes(g)):d,h=u?u.filter(g=>!d.includes(g)):[];f.forEach(g=>{const E=l[g];E&&!E.selected&&(E.selected=!0)}),h.forEach(g=>{const E=l[g];E&&E.selected&&(E.selected=!1)})},{immediate:!0}),o.watch(()=>[...r],(d,u)=>{const f=d.filter(g=>!u.includes(g)),h=u.filter(g=>!d.includes(g));f.forEach(g=>{const E=l[g];E&&!E.hovered&&(E.hovered=!0)}),h.forEach(g=>{const E=l[g];E&&E.hovered&&(E.hovered=!1)})});const c=o.computed(()=>{const d=a?a():Object.values(l);return t.zOrder.enabled?vc(d,t.zOrder,r,n):d});return{states:l,zOrderedList:c}}function bc(e,t,n,r,i,s){const a={id:n,selected:r,hovered:!1,selectable:o.computed(()=>e.value[n]?B.value(i.selectable,e.value[n]):o.unref(a.selectable)),zIndex:o.computed(()=>e.value[n]?B.value(i.zOrder.zIndex,e.value[n]):o.unref(a.zIndex))};t[n]=a,s(e,n,t[n])}function vc(e,t,n,r){return t.bringToFrontOnHover&&t.bringToFrontOnSelected?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);if(a!=l)return a?1:-1;const c=r.has(i.id),d=r.has(s.id);return c!=d?c?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnHover?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnSelected?e.sort((i,s)=>{const a=r.has(i.id),l=r.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):e.sort((i,s)=>i.zIndex-s.zIndex)}function wc(e){return typeof btoa===void 0?Buffer.from(e).toString("base64").replaceAll("=",""):btoa(e).replaceAll("=","")}function Ec(){return{markers:o.reactive({}),referenceCount:{}}}function kc(e){const{markers:t,referenceCount:n}=e;function r(l,c){var u;const d=(u=n[l])!=null?u:0;n[l]=d+1,d||(t[l]=c)}function i(l){var d;const c=(d=n[l])!=null?d:0;c&&(c-1===0?(delete t[l],delete n[l]):n[l]=c-1)}function s(l){l&&i(l)}function a(l,c,d,u,f){if(l.type==="none"){s(d);return}if(l.type==="custom")return s(d),l.customId;const h=xc(l,c,u),g=Pc(h,f);return g===d||(s(d),r(g,h)),g}return{makeMarker:a,clearMarker:s}}function xc(e,t,n){var r;return nt(J({},e),{color:(r=e.color)!=null?r:n,isSource:t})}function Pc(e,t){const n=wc(e.color),r=e.isSource?"L":"R",i=e.units==="strokeWidth"?"rel":"abs";return`marker_${t}_${e.type}_${e.width}_${e.height}_${e.margin}_${e.offset}_${n}_${r}_${i}`}function an(e,t,n){return{objects:e,selected:t,hovered:n}}const Vo=Symbol("states"),Sc={type:"none",width:0,height:0,margin:0,offset:0,units:"strokeWidth",color:null};function Cc(e,t,n,r,i,s,a){const l=o.reactive({}),c=de({});o.watchEffect(()=>{const w=Object.fromEntries(Object.keys(e.objects.value).map(b=>[b,{}]));Object.entries(t.objects.value).forEach(([b,p])=>{w!=null&&w[p.source]||(w[p.source]={}),w!=null&&w[p.target]||(w[p.target]={}),w[p.source][b]=p.target,w[p.target][b]=p.source}),yt(c,w)});const{states:d,zOrderedList:u}=sn(e.objects,r.node,e.selected,e.hovered,(w,b,p)=>{Oc(w,b,p,r.node,c,i)},(w,b)=>{const p=i.nodes;delete p[w]}),f=Ql(),h=tc(e.objects,t.objects,r),g=o.ref([]),{states:E,zOrderedList:x}=sn(t.objects,r.edge,t.selected,t.hovered,(w,b,p)=>{$c(w,b,p,r.edge,s,d,h,i,a,f)},(w,b)=>{var p;(p=b.stopWatchHandle)==null||p.call(b)},()=>g.value);o.watchEffect(()=>{g.value=zc(h.edgeGroups,E)}),o.watch(h.edgeGroups,w=>Ac(l,h,r),{immediate:!0});const{states:k,zOrderedList:m}=sn(n.objects,r.path,n.selected,n.hovered,(w,b,p)=>{const y=p;y.clickable=o.computed(()=>w.value[b]?B.value(r.path.clickable,w.value[b]):!1),y.hoverable=o.computed(()=>w.value[b]?B.value(r.path.hoverable,w.value[b]):!1),y.path=w.value[b],y.edges=Fo(y.path,t),y.directions=No(y.edges),y.stopWatchHandle=o.watch(()=>w.value[b].edges,()=>{y.edges=Fo(y.path,t),y.directions=No(y.edges)})},(w,b)=>{var p;(p=b.stopWatchHandle)==null||p.call(b)}),v={nodeStates:d,edgeStates:E,edgeGroupStates:h,summarizedEdgeStates:l,pathStates:k,layouts:i,nodeZOrderedList:u,edgeZOrderedList:x,pathZOrderedList:m};return o.provide(Vo,v),v}function Mc(e){return e.summarized}function ce(){return Z(o.inject(Vo),"states")}function Tc(e,t,n,r){return n&&r.hover?B.values(r.hover,e):Ho(e,t,r)}function Ho(e,t,n){return t&&n.selected?B.values(n.selected,e):B.values(n.normal,e)}function Oc(e,t,n,r,i,s){n.shape=o.computed(()=>e.value[t]?Tc(e.value[t],n.selected,n.hovered,r):o.unref(n.shape)),n.staticShape=o.computed(()=>e.value[t]?Ho(e.value[t],n.selected,r):o.unref(n.staticShape)),n.label=o.computed(()=>e.value[t]?B.values(r.label,e.value[t]):o.unref(n.label)),n.labelText=o.computed(()=>{var a,l;return r.label.text instanceof Function?o.unref(n.label).text:e.value[t]?(l=(a=e.value[t])==null?void 0:a[o.unref(n.label).text])!=null?l:"":o.unref(n.labelText)}),n.draggable=o.computed(()=>e.value[t]?B.value(r.draggable,e.value[t]):o.unref(n.draggable)),n.oppositeNodeIds=o.toRef(i,t),n.oppositeNodes=o.computed(()=>Object.entries(n.oppositeNodeIds).reduce((a,l)=>{const[c,d]=l,u=s.nodes[d];return u&&(a[c]={nodeId:d,pos:J({},u)}),a},{}))}function Bc(e,t,n,r){return t?B.values(r.selected,e):n&&r.hover?B.values(r.hover,e):B.values(r.normal,e)}function Wo(e){return e.type==="none"?Sc:e}function $c(e,t,n,r,i,s,a,l,c,d){const{makeMarker:u,clearMarker:f}=kc(i);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}}),n.label=o.computed(()=>e.value[t]?B.values(r.label,e.value[t]):o.unref(n.label));const h=o.computed(()=>{const m=e.value[t],v=Bc(m,n.selected,n.hovered,r);isNaN(+v.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",t,v.width),v.width=1),(v.color===void 0||v.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",t,v.color),v.color="#000000");let w=B.value(r.normal.width,m);isNaN(+w)&&(w=1);const b=Wo(B.values(r.marker.source,[m,v])),p=Wo(B.values(r.marker.target,[m,v]));return{stroke:v,normalWidth:w,source:b,target:p}});n.line=h;const g=o.toRef(a.edgeLayoutPoints,t),E=o.toRef(a.summarizedEdges,t),x=o.watchEffect(()=>{var L,V,ae,X,he,_e,tt;const m=e.value[t];if(!m)return;const v=(L=s[m.source])==null?void 0:L.staticShape,w=(V=s[m.target])==null?void 0:V.staticShape;if(!v||!w)return;const b=(ae=l.nodes[m==null?void 0:m.source])!=null?ae:{x:0,y:0},p=(X=l.nodes[m==null?void 0:m.target])!=null?X:{x:0,y:0},y=nc(g.value,(he=E.value)!=null?he:!1,b,p,c.value,r.keepOrder),[S,C]=fc(b,p,v,w),O=c.value;n.labelPosition=en(y,S*O,C*O);let M=0,T=0;const $=h.value;if($.source.type!=="none"){const ne=$.source;M=ne.margin+ne.width,ne.units==="strokeWidth"&&(M*=$.normalWidth)}if($.target.type!=="none"){const ne=$.target;T=ne.margin+ne.width,ne.units==="strokeWidth"&&(T*=$.normalWidth)}r.margin&&(M+=r.margin,T+=r.margin);const N=!!r.margin||$.source.type!=="none"||$.target.type!=="none";if(m.source===m.target){n.origin=vt(b,p);const ne=B.values(r.selfLoop,m),[je,le]=Ic(b,v,ne,N,M,T,(tt=(_e=g.value)==null?void 0:_e.pointInGroup)!=null?tt:0,O);n.position=je,n.loop=le,n.curve=void 0;return}else n.loop=void 0;if(N&&(M+=S,T+=C),r.type==="straight"||E.value)n.origin=y,n.curve=void 0,M===0&&T===0?n.position=n.origin:n.position=en(n.origin,M*O,T*O);else{n.origin=vt(b,p);const ne=g.value?g.value.groupWidth/2-g.value.pointInGroup:0,[je,le]=_c(n.origin,y,ne,M*O,T*O);n.position=je,n.curve=le}}),k=o.watchEffect(()=>{e.value[t]&&(n.sourceMarkerId=u(h.value.source,!0,n.sourceMarkerId,h.value.stroke.color,d),n.targetMarkerId=u(h.value.target,!1,n.targetMarkerId,h.value.stroke.color,d))});n.stopWatchHandle=()=>{x(),k(),f(n.sourceMarkerId),f(n.targetMarkerId)}}function zc(e,t){return Object.entries(e).map(([n,r])=>{var i;return r.summarize?{id:(i=Object.keys(r.edges)[0])!=null?i:n,summarized:!0,key:n,group:r,zIndex:Object.keys(r.edges).map(s=>{var a,l;return(l=(a=t[s])==null?void 0:a.zIndex)!=null?l:0}).reduce((s,a)=>Math.max(s,a))}:Object.entries(r.edges).map(([s,a])=>{var l,c;return{id:s,summarized:!1,key:s,edge:a,zIndex:(c=(l=t[s])==null?void 0:l.zIndex)!=null?c:0}})}).flat()}function _c(e,t,n,r,i){const s=W.fromLinePosition(e),a=W.fromLinePosition(t),l=lc(t),[c,d]=hc(s.source,s.target,l);let u,f;if(d===0)return[e,f];if(n===0)return r===0&&i===0?u=e:u=en(e,r,i),[u,f];const h=W.fromVectors(c,l),g=Ne(W.fromVectors(c,s.source),h);if(r===0&&i===0)u=e;else{let m=r/d,v=i/d;g>0&&(m*=-1,v*=-1),u=vt(we(s.source,c,m),we(s.target,c,-v));let w=Ne(W.fromVectors(c,s.source),W.fromVectors(c,s.target)),b=Ne(W.fromPositions(c,u.p1),W.fromPositions(c,u.p2));if(g*w<0&&(w=nn(w),g*b<0&&(b=nn(b))),w*b<0){const p=l.clone().add(a.v.normalize().multiplyScalar(.5));return u=vt(l,p),[u,f]}}const[E,x]=ac(u),k=on(E,c,x,g).map(m=>m.toObject());return f={center:l,theta:g,circle:{center:c,radius:d},control:k},[u,f]}function Ic(e,t,n,r,i,s,a,l){const c=l,d=(n.radius+a/2)*c,u=n.offset*c+d,f=(n.angle-90)*(Math.PI/180),h=D.fromObject({x:e.x+u*Math.cos(f),y:e.y+u*Math.sin(f)}),g=n.isClockwise;let E,x;if(r){const b=Xe(h,d,D.fromObject(e),De(t)*c);if(b){[E,x]=b;let p=1;if(g||([E,x]=[x,E],p=-1),i!==0||s!==0){const y=i*c/d*p,S=s*c/d*p;E=we(E,h,y),x=we(x,h,-S)}}}if(E===void 0||x===void 0){const b=D.fromObject(e).subtract(h).normalize().multiplyScalar(d);let p=1*(Math.PI/180);g||(p*=-1),E=h.clone().add(bt(b,p)),x=h.clone().add(bt(b,-p))}const k=D.fromObject(E).subtract(h).angleDegree(),w=(D.fromObject(x).subtract(h).angleDegree()+360-k)%360>=180;return[{p1:E,p2:x},{center:h,radius:[d,d],isLargeArc:g?w:!w,isClockwise:g}]}function Ac(e,t,n){const r=t.edgeGroups;Object.entries(r).filter(([i,s])=>s.summarize&&!(i in e)).forEach(([i,s])=>{const a={stroke:void 0};a.stroke=o.computed(()=>B.values(n.edge.summarized.stroke,s.edges)),e[i]=a}),Object.keys(e).forEach(i=>{var s;(s=t.edgeGroups[i])!=null&&s.summarize||delete e[i]})}function Fo(e,t){return e.edges.map(n=>({edgeId:n,edge:t.objects.value[n]})).filter(n=>n.edge)}class Ke{static valueOf(t){return Array.from(t.values())}}const Lc=3,Nc=6,Uo=500;function xt(e){return e==="touch"?Nc:Lc}function ln(e,t,n,r){let i=e.get(t);if(i)i.id!==n&&(i=void 0);else{const l=Array.from(e.entries()).find(([c,d])=>d.id===n);if(l){const[c,d]=l;e.delete(c),i=d}}let s,a;return[i,s,a]=Go(i,r,n),e.set(t,i),[s,a]}function Go(e,t,n){const r=Date.now();e&&r-e.lastTime<=Uo?(e.count++,e.lastTime=r):e={count:1,lastTime:r,id:n};const i={view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,detail:e.count};let s,a;return t instanceof PointerEvent?(Object.assign(i,{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary}),s=new PointerEvent("click",i),e.count===2&&(a=new PointerEvent("dblclick",i))):(s=new MouseEvent("click",i),e.count===2&&(a=new MouseEvent("dblclick",i))),[e,s,a]}function cn(e){const t=Date.now();Array.from(e.entries()).filter(([n,r])=>t-r.lastTime>Uo).map(([n,r])=>e.delete(n))}function Dc(e,t,n,r,i,s,a){const l={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},c={pointermove:g,pointerup:x,pointercancel:E};function d(b){const p=l.follow.followedPointerId===b.pointerId,y=i.has(b.nodeId),S=!(b.pointerId in l.pointers);if(p&&S||p&&!y){const C=Ke.valueOf(l.pointers).find(O=>i.has(O.nodeId));if(!C){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=C,l.follow.followedPointerId=b.pointerId}else{const C=l.pointers.get(l.follow.followedPointerId);if(!C){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=C}if(p||y){const C=Ke.valueOf(l.pointers).map(O=>O.nodeId);l.follow.nodeBasePositions=Object.fromEntries(Array.from(i).filter(O=>!C.includes(O)).filter(O=>{var M;return(M=e[O])==null?void 0:M.draggable}).map(O=>[O,un(t.nodes,O)])),b.dragBasePosition=J({},b.latestPosition),b.nodeBasePosition=un(t.nodes,b.nodeId)}}o.watch(i,b=>{const p=l.pointers.get(l.follow.followedPointerId);p&&d(p),b.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":b.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),o.watch(n.selectionMode,b=>{b!=="node"&&i.clear()});function u(b,p){const y=b.dragBasePosition.x-p.pageX,S=b.dragBasePosition.y-p.pageY,C=l.follow.followedPointerId==b.pointerId?J({[b.nodeId]:b.nodeBasePosition},l.follow.nodeBasePositions):{[b.nodeId]:b.nodeBasePosition},O=s.value;return Object.fromEntries(Object.entries(C).map(([M,T])=>[M,{x:T.x-y/O,y:T.y-S/O}]))}function f(b,p){var S,C;if(p.isTrusted||p.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const y=(C=(S=e[b])==null?void 0:S.selectable)!=null?C:!1;if(y){const O=Ke.valueOf(l.pointers).filter(M=>i.has(M.nodeId)).length>0;p.shiftKey||O?i.has(b)?i.delete(b):typeof y=="number"&&i.size>=y||i.add(b):i.has(b)||(i.clear(),i.add(b))}a.emit("node:click",{node:b,event:p})}function h(b,p){p.isTrusted||a.emit("node:dblclick",{node:b,event:p})}function g(b){var C;b.stopPropagation();const p=l.pointers.get(b.pointerId);if(!p)return;p.latestPosition={x:b.pageX,y:b.pageY},p.moveCounter++;const y=xt(b.pointerType);if(p.moveCounter<=y||!((C=e[p.nodeId])!=null&&C.draggable))return;if(p.moveCounter===y+1){const O=u(p,{pointerId:p.pointerId,pageX:p.dragBasePosition.x,pageY:p.dragBasePosition.y});a.emit("node:dragstart",O)}const S=u(p,b);a.emit("node:pointermove",S)}function E(b){b.stopPropagation();let p=l.pointers.get(b.pointerId);if(p){for(p of l.pointers.values()){const y=p.nodeId,S=xt(b.pointerType);if(p.moveCounter>S){const O=u(p,{pointerId:p.pointerId,pageX:p.latestPosition.x,pageY:p.latestPosition.y});a.emit("node:dragend",O)}a.emit("node:pointerup",{node:y,event:b})}l.pointers.clear(),l.follow={followedPointerId:-1,nodeBasePositions:{}},ee(c).forEach(([y,S])=>{document.removeEventListener(y,S)}),n.viewMode.value="default"}}function x(b){var O,M,T;b.stopPropagation();const p=l.pointers.get(b.pointerId);if(!p)return;l.pointers.delete(b.pointerId);const y=p.nodeId,S=xt(b.pointerType),C=p.moveCounter>S;if(C){if((O=e[p.nodeId])!=null&&O.draggable){const $=u(p,b);a.emit("node:dragend",$),a.emit("node:pointerup",{node:y,event:b})}}else a.emit("node:pointerup",{node:y,event:b});if(!C){const[$,N]=ln(l.clicks,p.pointerId,y,b);(M=p.eventTarget)==null||M.dispatchEvent($),N&&((T=p.eventTarget)==null||T.dispatchEvent(N))}l.pointers.size===0?(l.follow={followedPointerId:-1,nodeBasePositions:{}},ee(c).forEach(([$,N])=>{document.removeEventListener($,N)}),cn(l.clicks),n.viewMode.value="default"):d(p),r.clear(),l.hoveredNodesPre.forEach(r.add,r)}function k(b,p){if(p.button==2||(p.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;l.pointers.size==0&&(n.viewMode.value="node",ee(c).forEach(([S,C])=>{document.addEventListener(S,C)}));const y={pointerId:p.pointerId,nodeId:b,moveCounter:0,nodeBasePosition:un(t.nodes,b),dragBasePosition:{x:p.pageX,y:p.pageY},latestPosition:{x:p.pageX,y:p.pageY},eventTarget:p.currentTarget};l.pointers.set(p.pointerId,y),i.has(b)&&(l.follow.followedPointerId<0?(l.follow.followedPointerId=p.pointerId,d(y)):delete l.follow.nodeBasePositions[y.nodeId]),a.emit("node:pointerdown",{node:b,event:p})}function m(b,p){l.hoveredNodesPre.add(b),!(l.pointers.size>0)&&(r.add(b),a.emit("node:pointerover",{node:b,event:p}))}function v(b,p){l.hoveredNodesPre.delete(b),!(l.pointers.size>0)&&(r.delete(b),a.emit("node:pointerout",{node:b,event:p}))}function w(b,p){p.stopPropagation(),a.emit("node:contextmenu",{node:b,event:p})}return{handleNodePointerDownEvent:k,handleNodePointerOverEvent:m,handleNodePointerOutEvent:v,handleNodeClickEvent:f,handleNodeDoubleClickEvent:h,handleNodeContextMenu:w}}function un(e,t){var r;const n=(r=e[t])!=null?r:{x:0,y:0};return J({},n)}function jc(e,t,n,r,i){const s={pointers:new Map,pointerPeekCount:0,clicks:new Map},a={pointerup:c,pointercancel:d};o.watch(r,p=>{p.size>0&&t.selectionMode.value!=="edge"?t.selectionMode.value="edge":p.size===0&&t.selectionMode.value==="edge"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,p=>{p!=="edge"&&r.clear()});function l(p,y){if(y.button==2||(y.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",ee(a).forEach(([C,O])=>{document.addEventListener(C,O)}),s.pointerPeekCount=0),s.pointerPeekCount++;const S={pointerId:y.pointerId,id:p,eventTarget:y.currentTarget};s.pointers.set(y.pointerId,S),i.emit("edge:pointerdown",se(p,y))}function c(p){var M,T;p.stopPropagation();const y=s.pointers.get(p.pointerId);if(!y)return;s.pointers.delete(p.pointerId);const S=y.id;i.emit("edge:pointerup",se(S,p));const[C,O]=ln(s.clicks,y.pointerId,S instanceof Array?S.join(","):S,p);(M=y.eventTarget)==null||M.dispatchEvent(C),O&&((T=y.eventTarget)==null||T.dispatchEvent(O)),s.pointers.size===0&&(s.pointerPeekCount=0,ee(a).forEach(([$,N])=>{document.removeEventListener($,N)}),cn(s.clicks),t.viewMode.value="default")}function d(p){if(p.stopPropagation(),!!s.pointers.get(p.pointerId)){for(const S of s.pointers.values()){const C=S.id;i.emit("edge:pointerup",se(C,p))}s.pointers.clear(),s.pointerPeekCount=0,ee(a).forEach(([S,C])=>{document.removeEventListener(S,C)}),i.emit("view:mode","default")}}function u(p,y){var O;if(y.isTrusted||y.shiftKey&&!["container","edge"].includes(t.selectionMode.value))return;t.selectionMode.value="edge";const S=p instanceof Array?p:[p],C=Ke.valueOf(s.pointers).filter(M=>(M.id instanceof Array?M.id:[M.id]).every($=>r.has($))).length>0;if(p instanceof Array)S.find(T=>{var $;return($=e[T])==null?void 0:$.selectable})&&(y.shiftKey||C?S.some(T=>r.has(T))?S.forEach(T=>r.delete(T)):S.forEach(T=>{var N;const $=(N=e[T])==null?void 0:N.selectable;typeof $=="number"&&r.size>=$||r.add(T)}):(r.clear(),S.forEach(T=>r.add(T))));else{const M=(O=e[p])==null?void 0:O.selectable;M&&(y.shiftKey||C?r.has(p)?r.delete(p):typeof M=="number"&&r.size>=M||r.add(p):r.has(p)||(r.clear(),r.add(p)))}i.emit("edge:click",se(p,y))}function f(p,y){y.isTrusted||i.emit("edge:dblclick",se(p,y))}function h(p,y){n.add(p),i.emit("edge:pointerover",se(p,y))}function g(p,y){n.delete(p),i.emit("edge:pointerout",se(p,y))}function E(p,y){y.stopPropagation(),i.emit("edge:contextmenu",se(p,y))}function x(p,y){if(y.button==2||(y.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",ee(a).forEach(([C,O])=>{document.addEventListener(C,O)}),s.pointerPeekCount=0),s.pointerPeekCount++;const S={pointerId:y.pointerId,id:p,eventTarget:y.currentTarget};s.pointers.set(y.pointerId,S),i.emit("edge:pointerdown",se(p,y))}function k(p,y){p.forEach(S=>n.add(S)),i.emit("edge:pointerover",se(p,y))}function m(p,y){p.forEach(S=>n.delete(S)),i.emit("edge:pointerout",se(p,y))}function v(p,y){u(p,y)}function w(p,y){f(p,y)}function b(p,y){y.stopPropagation(),i.emit("edge:contextmenu",se(p,y))}return{handleEdgePointerDownEvent:l,handleEdgePointerOverEvent:h,handleEdgePointerOutEvent:g,handleEdgeClickEvent:u,handleEdgeDoubleClickEvent:f,handleEdgeContextMenu:E,handleEdgesPointerDownEvent:x,handleEdgesPointerOverEvent:k,handleEdgesPointerOutEvent:m,handleEdgesClickEvent:v,handleEdgesDoubleClickEvent:w,handleEdgesContextMenu:b}}function se(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}function Zc(e,t,n,r){const i={moveCounter:0,pointerCounter:0,clickState:void 0},s={pointermove:l,pointerup:c,pointercancel:c};function a(g){i.moveCounter=0,i.pointerCounter===0&&ee(s).forEach(([E,x])=>{document.addEventListener(E,x,{passive:!0})}),i.pointerCounter++}function l(g){i.moveCounter++}function c(g){if(i.pointerCounter--,i.pointerCounter<=0){i.pointerCounter=0,ee(s).forEach(([x,k])=>{document.removeEventListener(x,k)});const E=xt(g.pointerType);if(i.moveCounter<=E){if(g.shiftKey&&t.selectionMode.value!=="container")return;t.selectionMode.value="container";const[x,k,m]=Go(i.clickState,g,"view");i.clickState=x,e.value.dispatchEvent(k),m&&e.value.dispatchEvent(m)}}}function d(g){g.isTrusted||(g.stopPropagation(),r.emit("view:click",{event:g}))}function u(g){g.isTrusted||(g.stopPropagation(),r.emit("view:dblclick",{event:g}))}function f(g){r.emit("view:contextmenu",{event:g}),i.pointerCounter>0&&(i.pointerCounter=0,ee(s).forEach(([E,x])=>{var k;(k=e.value)==null||k.removeEventListener(E,x)}))}const h=g=>{g.preventDefault()};o.onMounted(()=>{const g=e.value;g&&(g.addEventListener("pointerdown",a,{passive:!0}),g.addEventListener("click",d,{passive:!1}),g.addEventListener("dblclick",u,{passive:!1}),g.addEventListener("contextmenu",f,{passive:!1}),n.value&&g.addEventListener("wheel",h,{passive:!1}))}),o.onUnmounted(()=>{const g=e.value;g&&(g.removeEventListener("pointerdown",a),g.removeEventListener("click",d),g.removeEventListener("dblclick",u),g.removeEventListener("contextmenu",f),n.value&&g.removeEventListener("wheel",h))}),o.watch(n,(g,E)=>{const x=e.value;!x||g===E||(g?x.addEventListener("wheel",h,{passive:!1}):x.removeEventListener("wheel",h))})}function Rc(e,t,n,r,i,s){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map};function l(m,v){var w,b;return i.value?{path:(b=(w=e[m])==null?void 0:w.path)!=null?b:m,event:v}:{path:m,event:v}}const c={pointerup:u,pointercancel:f};o.watch(r,m=>{m.size>0&&t.selectionMode.value!=="path"?t.selectionMode.value="path":m.size===0&&t.selectionMode.value==="path"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,m=>{m!=="path"&&r.clear()});function d(m,v){var b;if(!((b=e[m])!=null&&b.clickable)||v.button==2||(v.stopPropagation(),!["default","path"].includes(t.viewMode.value)))return;a.pointers.size==0&&(t.viewMode.value="path",ee(c).forEach(([p,y])=>{document.addEventListener(p,y)}),a.pointerPeekCount=0),a.pointerPeekCount++;const w={pointerId:v.pointerId,id:m,eventTarget:v.currentTarget};a.pointers.set(v.pointerId,w),s.emit("path:pointerdown",l(m,v))}function u(m){var y,S;const v=a.pointers.get(m.pointerId);if(!v)return;m.stopPropagation(),a.pointers.delete(m.pointerId);const w=v.id;s.emit("path:pointerup",l(w,m));const[b,p]=ln(a.clicks,v.pointerId,w,m);(y=v.eventTarget)==null||y.dispatchEvent(b),p&&((S=v.eventTarget)==null||S.dispatchEvent(p)),a.pointers.size===0&&(a.pointerPeekCount=0,ee(c).forEach(([C,O])=>{document.removeEventListener(C,O)}),cn(a.clicks),t.viewMode.value="default")}function f(m){if(a.pointers.get(m.pointerId)){m.stopPropagation();for(const w of a.pointers.values()){const b=w.id;s.emit("path:pointerup",l(b,m))}a.pointers.clear(),a.pointerPeekCount=0,ee(c).forEach(([w,b])=>{document.removeEventListener(w,b)}),s.emit("view:mode","default")}}function h(m,v){var w;(w=e[m])!=null&&w.hoverable&&(n.add(m),s.emit("path:pointerover",l(m,v)))}function g(m,v){var w;(w=e[m])!=null&&w.hoverable&&(n.delete(m),s.emit("path:pointerout",l(m,v)))}function E(m,v){var b,p,y;if(v.isTrusted||!((b=e[m])!=null&&b.clickable)||v.shiftKey&&!["container","path"].includes(t.selectionMode.value))return;t.selectionMode.value="path";const w=(y=(p=e[m])==null?void 0:p.selectable)!=null?y:!1;if(w){const S=Ke.valueOf(a.pointers).filter(C=>r.has(C.id)).length>0;v.shiftKey||S?r.has(m)?r.delete(m):typeof w=="number"&&r.size>=w||r.add(m):r.has(m)||(r.clear(),r.add(m))}s.emit("path:click",l(m,v))}function x(m,v){var w;v.isTrusted||(w=e[m])!=null&&w.clickable&&s.emit("path:dblclick",l(m,v))}function k(m,v){var w;(w=e[m])!=null&&w.clickable&&(v.stopPropagation(),s.emit("path:contextmenu",l(m,v)))}return{handlePathPointerDownEvent:d,handlePathPointerOverEvent:h,handlePathPointerOutEvent:g,handlePathClickEvent:E,handlePathDoubleClickEvent:x,handlePathContextMenu:k}}function Vc(e){return ue(this,null,function*(){const n=yield(yield fetch(e)).blob();return new Promise((r,i)=>{try{const s=new FileReader;s.onload=function(){r(this.result)},s.readAsDataURL(n)}catch(s){i(s)}})})}function dn(e,t,n){var s;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform((s=t.getCTM())==null?void 0:s.inverse());return{x:i.x,y:i.y}}function Hc(e,t,n){const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform(t.getCTM());return{x:i.x,y:i.y}}function qo(e,t,n){var d;const r=e.cloneNode(!0),i=t.getBBox(),s=1/n,a={x:Math.floor((i.x-10)*s),y:Math.floor((i.y-10)*s),width:Math.ceil((i.width+20)*s),height:Math.ceil((i.height+20)*s)};r.setAttribute("width",a.width.toString()),r.setAttribute("height",a.height.toString());const l=r.querySelector(".v-ng-viewport");l.setAttribute("transform",`translate(${-a.x} ${-a.y}), scale(${s})`),l.removeAttribute("style"),r.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`),r.removeAttribute("style");const c=document.createNodeIterator(r,NodeFilter.SHOW_COMMENT);for(;c.nextNode();){const u=c.referenceNode;(d=u.parentNode)==null||d.removeChild(u)}return r}function Wc(e){return ue(this,null,function*(){let t=!1,n=e.getAttribute("href");if(n||(t=!0,n=e.getAttribute("xlink:href")),!(!n||n.startsWith("data:")))try{const r=yield Vc(n);e.setAttribute(t?"xlink:href":"href",r)}catch(r){console.warn("Image download failed.",n);return}})}function Fc(i,s,a){return ue(this,arguments,function*(e,t,n,r={}){const l=qo(e,t,n);if(r.embedImages){const d=Array.from(l.querySelectorAll("image")).map(u=>Wc(u));yield Promise.all(d)}return l})}function Uc(e,t,n,r,i,s){const a=o.computed(()=>!!s.node.selectable&&s.view.boxSelectionEnabled),l=o.computed(()=>t.viewMode.value==="box-selection"),c=o.ref(),d=o.ref(),u={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},f=Bl(()=>{Gc(Z(e.value,"container"),Z(c.value,"viewport"),d,n.nodes,r,i,u.selectedNodesAtSelectStarted,u.selectionType)},50,{maxWait:100}),h=new qc(e,E,x,k,g,m);function g(y){if(u.options.stopTrigger!=="click"||u.pointers.size>0)return;const S={x:y.offsetX,y:y.offsetY};u.startPoint&&D.fromObject(u.startPoint).distance(S)>10||p()}function E(y){y.stopPropagation();const S={x:y.offsetX,y:y.offsetY};u.pointers.size===0&&(u.startPoint=S,h.activate(),u.selectedNodesAtSelectStarted.clear(),i.forEach(C=>u.selectedNodesAtSelectStarted.add(C)),u.options.selectionTypeWithShiftKey==="same"?u.selectionType=u.options.selectionType:u.selectionType=y.shiftKey?u.options.selectionTypeWithShiftKey:u.options.selectionType),u.pointers.has(y.pointerId)||u.pointers.add(y.pointerId),u.points.set(y.pointerId,S),v()}function x(y){if(u.pointers.delete(y.pointerId),u.pointers.size===1){const S=Z(e.value).getBoundingClientRect(),C={x:y.x-S.x,y:y.y-S.y};u.startPoint=C}else u.pointers.size===0&&(h.deactivate(),u.options.stopTrigger==="pointerup"&&p(),u.selectedNodesAtSelectStarted.clear());v()}function k(y){const S=Z(e.value).getBoundingClientRect(),C={x:y.x-S.x,y:y.y-S.y};u.points.set(y.pointerId,C),v(),f()}function m(y){y.key==="Escape"&&u.options.stopTrigger!=="manual"&&(y.stopPropagation(),p())}function v(){let y,S;const C=Array.from(u.pointers);if(C.length>=2){const O=C[0],M=C[C.length-1];y=u.points.get(O),S=u.points.get(M)}else if(u.startPoint&&C.length===1){const O=C[0];y=u.startPoint,S=u.points.get(O)}else y=void 0,S=void 0;y&&S?(d.value={pos:{x:Math.min(y.x,S.x),y:Math.min(y.y,S.y)},size:{width:Math.abs(S.x-y.x),height:Math.abs(S.y-y.y)}},d.value.size.width===0&&(d.value.size.width=1),d.value.size.height===0&&(d.value.size.height=1)):d.value&&(d.value=void 0)}const w=new Xc(e,y=>{a.value&&s.view.selection.detector(y)&&(b({stop:"manual",type:"append",withShiftKey:"invert"}),w.activate())},y=>{a.value&&s.view.selection.detector(y)&&(u.pointers.size===0?p():u.options.stopTrigger="pointerup",w.deactivate())});o.watch(a,y=>{y?w.register():w.unregister()}),o.onMounted(()=>{var y;c.value=(y=e.value)==null?void 0:y.querySelector(".v-ng-viewport"),a.value&&w.register()}),o.onUnmounted(()=>{p(),a.value&&w.unregister()});function b(y={}){var S,C,O;u.options={stopTrigger:(S=y.stop)!=null?S:"pointerup",selectionType:(C=y.type)!=null?C:"append",selectionTypeWithShiftKey:(O=y.withShiftKey)!=null?O:"same"},t.viewMode.value!=="box-selection"&&(t.viewMode.value="box-selection",u.pointers.clear(),h.register())}function p(){t.viewMode.value==="box-selection"&&(t.viewMode.value="default",h.unregister())}return{isBoxSelectionMode:l,selectionBox:d,startBoxSelection:b,stopBoxSelection:p}}function Gc(e,t,n,r,i,s,a,l){if(!n.value)return;const c=n.value,d=dn(e,t,c.pos),u=dn(e,t,{x:c.pos.x+c.size.width,y:c.pos.y+c.size.height}),f=new Set(Object.entries(r).filter(([h,g])=>d.x<=g.x&&g.x<=u.x&&d.y<=g.y&&g.y<=u.y).map(([h,g])=>h));if(l==="append")s.forEach(h=>{f.has(h)||s.delete(h)}),f.forEach(h=>{var E,x;const g=(x=(E=i[h])==null?void 0:E.selectable)!=null?x:!1;(g===!0||typeof g=="number"&&s.size<g)&&s.add(h)});else{const h=new Set(a);h.forEach(g=>{f.has(g)&&h.delete(g)}),f.forEach(g=>{var E,x;if(!a.has(g)){const k=(x=(E=i[g])==null?void 0:E.selectable)!=null?x:!1;(k===!0||typeof k=="number"&&h.size<k)&&h.add(g)}}),s.clear(),h.forEach(g=>s.add(g))}}class qc{constructor(t,n,r,i,s,a){this._container=t,this._handlePointerDownEvent=n,this._handlePointerUpEvent=r,this._handlePointerMoveEvent=i,this._handleClickEvent=s,this._handleKeyDownEvent=a,this._ignoreEvent=l=>l.stopPropagation()}register(){const t={capture:!0,passive:!1},n=Z(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,t),n.addEventListener("click",this._handleClickEvent,t),n.addEventListener("pointerenter",this._ignoreEvent,t),n.addEventListener("pointerleave",this._ignoreEvent,t),document.addEventListener("keydown",this._handleKeyDownEvent,t)}activate(){const t={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,t),document.addEventListener("pointerup",this._handlePointerUpEvent,t)}deactivate(){const t={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,t),document.removeEventListener("pointerup",this._handlePointerUpEvent,t)}unregister(){this.deactivate();const t={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,t),n.removeEventListener("click",this._handleClickEvent,t),n.removeEventListener("pointerenter",this._ignoreEvent,t),n.removeEventListener("pointerleave",this._ignoreEvent,t),document.removeEventListener("keydown",this._handleKeyDownEvent,t)}}}class Xc{constructor(t,n,r){this._container=t,this._handleKeyDownEvent=n,this._handleKeyUpEvent=r,this._preventDefault=i=>{i.stopPropagation(),i.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),Z(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}const Xo=Symbol("mouseEventHandlers");function Kc(e,t,n,r,i,s,a,l,c,d,u,f,h,g,E,x){const k={selectionMode:o.ref("container"),viewMode:o.ref("default")};a.size>0?k.selectionMode.value="node":l.size>0?k.selectionMode.value="edge":c.size>0&&(k.selectionMode.value="path"),o.watch(k.viewMode,v=>{x.emit("view:mode",v)}),Zc(e,k,g,x);const m=J(J(J(J({selectedNodes:a,hoveredNodes:d,selectedEdges:l,hoveredEdges:u,selectedPaths:c,hoveredPaths:f},Dc(r,t,k,d,a,n,x)),jc(i,k,u,l,x)),Rc(s,k,f,c,h,x)),Uc(e,k,t,r,a,E));return o.provide(Xo,m),m}function Ye(){return Z(o.inject(Xo),"mouseEventHandlers")}function Yc(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const Ko=Symbol("emitter");function Jc(){const e=Yc();return o.provide(Ko,e),e}function Qc(){return Z(o.inject(Ko),"event emitter")}var Pt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function eu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var St={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Pt!="undefined")return Pt;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(e.touches!==void 0&&e.touches.length){if(e.touches[n].clientX!==void 0)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(e.touches[n].pageX!==void 0){var r=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-r.left,e.clientY=e.touches[n].pageY-r.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,r=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var r=this,i,s,a,l=null,c=0;n||(n={});var d=function(){c=n.leading===!1?0:r.now(),l=null,a=e.apply(i,s),l||(i=s=null)};return function(){var u=r.now();!c&&n.leading===!1&&(c=u);var f=t-(u-c);return i=this,s=arguments,f<=0||f>t?(clearTimeout(l),l=null,c=u,a=e.apply(i,s),l||(i=s=null)):!l&&n.trailing!==!1&&(l=setTimeout(d,f)),a}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||Yo(33):Yo(t)},calculateDistance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}};function Yo(e){return function(t){window.setTimeout(t,e)}}var tu=St,nu=function(){var e="",t,n,r,i=[],s={passive:!0},a={passive:!1};tu.getGlobalThis().addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on");function l(){return r||(r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),r}function c(x,k){var m=function(v){!v&&(v=window.event);var w={originalEvent:v,target:v.target||v.srcElement,type:"wheel",deltaMode:v.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){v.preventDefault?v.preventDefault():v.returnValue=!1}};return l()=="mousewheel"?(w.deltaY=-.025*v.wheelDelta,v.wheelDeltaX&&(w.deltaX=-.025*v.wheelDeltaX)):w.deltaY=v.detail,k(w)};return i.push({element:x,fn:m}),m}function d(x){for(var k=0;k<i.length;k++)if(i[k].element===x)return i[k].fn;return function(){}}function u(x){for(var k=0;k<i.length;k++)if(i[k].element===x)return i.splice(k,1)}function f(x,k,m,v){var w;l()==="wheel"?w=m:w=c(x,m),x[t](e+k,w,v?s:a)}function h(x,k,m,v){var w;l()==="wheel"?w=m:w=d(x),x[n](e+k,w,v?s:a),u(x)}function g(x,k,m){f(x,l(),k,m),l()=="DOMMouseScroll"&&f(x,"MozMousePixelScroll",k,m)}function E(x,k,m){h(x,l(),k,m),l()=="DOMMouseScroll"&&h(x,"MozMousePixelScroll",k,m)}return{on:g,off:E}}(),Ct=St,Jo="unknown";typeof document!="undefined"&&document.documentMode&&(Jo="ie");var fn={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(Ct.isElement(t)?n=t:n=e.querySelector(t),!n){var r=Array.prototype.slice.call(e.childNodes||e.children).filter(function(c){return c.nodeName!=="defs"&&c.nodeName!=="#text"});r.length===1&&r[0].nodeName==="g"&&r[0].getAttribute("transform")===null&&(n=r[0])}if(!n){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",i);var s=e.childNodes||e.children;if(s&&s.length>0)for(var a=s.length;a>0;a--)s[s.length-a].nodeName!=="defs"&&n.appendChild(s[s.length-a]);e.appendChild(n)}var l=[];return n.getAttribute("class")&&(l=n.getAttribute("class").split(" ")),~l.indexOf("svg-pan-zoom_viewport")||(l.push("svg-pan-zoom_viewport"),n.setAttribute("class",l.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Ct.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var r=e[n];r.parentNode.insertBefore(r,r)}},Pt?Pt.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var r=this,i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",i),"transform"in e.style?e.style.transform=i:"-ms-transform"in e.style?e.style["-ms-transform"]=i:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=i),Jo==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return Ct.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var r=t.createSVGPoint();return Ct.touchNormalize(e,t,n),r.x=e.clientX,r.y=e.clientY,r},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var r=e.createSVGPoint();return r.x=t,r.y=n,r}},oe=fn,ou={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(oe.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var r=document.createElementNS(oe.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(r)}var i=document.createElementNS(oe.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomReset:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r);var i=document.createElementNS(oe.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(i),t},_createZoomOut:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},ru=fn,Ee=St,G=function(e,t){this.init(e,t)};G.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=Ee.proxy(this.updateCTM,this),this.requestAnimationFrame=Ee.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},G.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(r){return r}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(n)?n:1,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},G.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},G.prototype.getViewBox=function(){return Ee.extend({},this.viewBox)},G.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t=isFinite(t)?t:1,e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=r}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},G.prototype.getOriginalState=function(){return Ee.extend({},this.originalState)},G.prototype.getState=function(){return Ee.extend({},this.activeState)},G.prototype.getZoom=function(){return this.activeState.zoom},G.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},G.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},G.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},G.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},G.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),i=!1,s=!1;r===!1?(e.e=this.getPan().x,e.f=this.getPan().y,i=s=!0):Ee.isObject(r)&&(r.x===!1?(e.e=this.getPan().x,i=!0):Ee.isNumber(r.x)&&(e.e=r.x),r.y===!1?(e.f=this.getPan().y,s=!0):Ee.isNumber(r.y)&&(e.f=r.y)),i&&s||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},G.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},G.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},G.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},G.prototype.pendingUpdate=!1,G.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},G.prototype.updateCTM=function(){var e=this.getCTM();ru.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var iu=function(e,t){return new G(e,t)},Qo=nu,hn=ou,te=St,Y=fn,su=iu,R=function(e,t){this.init(e,t)},au={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},er={passive:!0},tr={passive:!1};R.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),Y.setupSvgAttributes(this.svg),this.options=te.extend(te.extend({},au),t),this.state="none";var r=Y.getBoundingClientRectNormalized(e);this.width=r.width,this.height=r.height,this.viewport=su(Y.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(s,a)},onZoom:function(s){if(n.viewport&&n.options.onZoom)return n.options.onZoom(s)},beforePan:function(s,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(s,a)},onPan:function(s){if(n.viewport&&n.options.onPan)return n.options.onPan(s)},onUpdatedCTM:function(s){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(s)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&hn.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},R.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={pointerdown:function(s){if(s.pointerType!=="touch"){var a=e.handleMouseDown(s,t);return t=s,a}},touchstart:function(s){var a=e.handleTouchStart(s,t);return t=s,a},pointerup:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchend:function(s){return e.handleTouchEnd(s)},pointermove:function(s){if(s.pointerType!=="touch")return e.handleMouseMove(s)},touchmove:function(s){return e.handleTouchMove(s)},pointerleave:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},pointercancel:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchleave:function(s){return e.handleTouchEnd(s)},touchcancel:function(s){return e.handleTouchEnd(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?tr:er);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},R.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;Qo.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},R.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Qo.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},R.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/r;var i=this.svg.getScreenCTM().inverse(),s=Y.getEventPoint(e,this.svg).matrixTransform(i),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,s)}},R.prototype.zoomAtPoint=function(e,t,n){var r=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*r.zoom?e=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*r.zoom&&(e=this.options.maxZoom*r.zoom/this.getZoom());var i=this.viewport.getCTM(),s=t.matrixTransform(i.inverse()),a=this.svg.createSVGMatrix().translate(s.x,s.y).scale(e).translate(-s.x,-s.y),l=i.multiply(a);l.a!==i.a&&this.viewport.setCTM(l)},R.prototype.zoom=function(e,t){this.zoomAtPoint(e,Y.getSvgCenterPoint(this.svg,this.width,this.height),t)},R.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},R.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),te.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=Y.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)},R.prototype.getZoom=function(){return this.viewport.getZoom()},R.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},R.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},R.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},R.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},R.prototype.reset=function(){this.resetZoom(),this.resetPan()},R.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var r=Y.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,r)},R.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),te.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&te.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},R.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},R.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")},R.prototype.handleTouchStart=function(e,t){if(e.touches.length==1)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=Y.getTouchPoint(e,this.svg,0),r=Y.getTouchPoint(e,this.svg,1);this.firstDistance=te.calculateDistance(n,r),n.x=(n.x+r.x)/2,n.y=(n.y+r.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},R.prototype.handleTouchMove=function(e){if(e.touches.length==1)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=Y.getTouchPoint(e,this.svg,0),n=Y.getTouchPoint(e,this.svg,1),r=this.svg.createSVGPoint();if(r.x=(t.x+n.x)/2,r.y=(t.y+n.y)/2,this.state==="pan"&&this.options.panEnabled){var i=r.matrixTransform(this.firstEventCTM.inverse()),s=this.firstEventCTM.translate(i.x-this.stateOrigin.x,i.y-this.stateOrigin.y);this.viewport.setCTM(s)}if(this.options.zoomEnabled){var a=te.calculateDistance(t,n),l=a/this.firstDistance,c=this.svg.getScreenCTM().inverse(),d=r.matrixTransform(c);this.zoomAtPoint(this.firstZoomLevel*l,d,!0)}}},R.prototype.handleTouchEnd=function(e){if(e.touches.length==0)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),e.touches.length==1)this.stateOrigin=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=Y.getTouchPoint(e,this.svg,0),n=Y.getTouchPoint(e,this.svg,1);this.firstDistance=te.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}},R.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},R.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},R.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})},R.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},R.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},R.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},R.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},R.prototype.resize=function(){var e=Y.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},R.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?tr:er);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),ke=ke.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},R.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:te.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:te.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,hn.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,hn.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:te.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:te.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:te.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var ke=[],lu=function(e,t){var n=te.getSvg(e);if(n===null)return null;for(var r=ke.length-1;r>=0;r--)if(ke[r].svg===n)return ke[r].instance.getPublicInstance();return ke.push({svg:n,instance:new R(n,t)}),ke[ke.length-1].instance.getPublicInstance()},cu=lu;const uu=eu(cu),du={fitToContents(){return this.fit().center().zoomOut().zoomOut(),this},getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const r={width:e.width/n,height:e.height/n};return{box:{top:-t.y,bottom:r.height-t.y,left:-t.x,right:r.width-t.x},center:{x:r.width/2-t.x,y:r.height/2-t.y}}},getViewBox(){return this.getViewArea().box},setViewBox(e){const t=e.right-e.left,n=e.bottom-e.top,{width:r,height:i}=this.getSizes(),s=t/n,a=r/i,l=s<a?n*a:t,c=s>a?t/a:n,d=Math.min(r/l,i/c),u=this.getRealZoom(),f=this.getZoom(),h=u/f;this.zoom(d/h);const g={x:(e.left+t/2)*d,y:(e.top+n/2)*d};this.pan({x:-g.x+l/2*d,y:-g.y+c/2*d})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const r=Math.max(1e-4,t),i=Math.max(r,n),s=Math.max(Math.min(i,e),r),a=this.getRealZoom(),l=this.getZoom(),c=a/l;this.setMinZoom(r/c).setMaxZoom(i/c).zoom(s/c)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function fu(e,t){var r,i;const n=e;return n._isPanEnabled=(r=t.panEnabled)!=null?r:!0,n._isZoomEnabled=(i=t==null?void 0:t.zoomEnabled)!=null?i:!0,n._internalIsPanEnabled=n.isPanEnabled,n._internalEnablePan=n.enablePan,n._internalDisablePan=n.disablePan,n._internalIsZoomEnabled=n.isZoomEnabled,n._internalEnableZoom=n.enableZoom,n._internalDisableZoom=n.disableZoom,Object.assign(e,du),n}function hu(e,t){var s,a,l,c,d,u;const n=(a=(s=t.customEventsHandler)==null?void 0:s.init)!=null?a:f=>{},r=(c=(l=t.customEventsHandler)==null?void 0:l.destroy)!=null?c:f=>{},i=(u=(d=t.customEventsHandler)==null?void 0:d.haltEventListeners)!=null?u:[];return t.mouseWheelZoomEnabled===void 0&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:f=>{fu(f.instance,t),n(f)},destroy:f=>r(f),haltEventListeners:i},uu(e,t)}function pu(e,t){const n=o.ref();let r=0;const i=[],s=[],a=()=>{r=1,i.forEach(u=>u()),i.length=0},l=()=>{r=2,s.forEach(u=>u()),s.length=0};return o.onMounted(()=>{var x,k,m,v,w,b;const u=Z(e.value,"<svg>"),f=(k=(x=t.customEventsHandler)==null?void 0:x.init)!=null?k:p=>{},h=(v=(m=t.customEventsHandler)==null?void 0:m.destroy)!=null?v:p=>{},g=(b=(w=t.customEventsHandler)==null?void 0:w.haltEventListeners)!=null?b:[];t.customEventsHandler={init:p=>{n.value=p.instance,f(p),a()},destroy:p=>{l(),h(p)},haltEventListeners:g};const E=()=>{const p=u.getBoundingClientRect();p.width!==0&&p.height!==0?hu(u,t):setTimeout(E,200)};E()}),o.onUnmounted(()=>{var u;(u=n.value)==null||u.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:u=>{r===0?i.push(u):r===1&&u()},onSvgPanZoomUnmounted:u=>{r===0||r===1?s.push(u):u()}}}const nr=Symbol("zoomLevel");function gu(e,t){const n=o.computed(()=>t.scalingObjects?1:1/e.value);return o.provide(nr,{zoomLevel:e,scale:n}),{scale:n}}function re(){return Z(o.inject(nr),"zoomLevel")}function mu(e){return e instanceof Promise||e&&typeof e.then=="function"}function yu(){let e=null;const t=o.ref({enabled:!1,duration:300,timingFunction:"linear"});function n(r,i=300,s="linear"){e&&(clearTimeout(e),e=null),t.value={enabled:!0,duration:i,timingFunction:s},o.nextTick(()=>ue(this,null,function*(){const a=r();mu(a)&&(yield a),e&&clearTimeout(e),e=window==null?void 0:window.setTimeout(()=>{t.value.enabled=!1,e=null},i)}))}return{transitionWhile:n,transitionOption:t}}function bu(e){const t=o.ref({}),n=o.ref(!1);let r=1;const i=new Map;return o.watchEffect(()=>{if(e.value instanceof Array){const s=new Set([]);if(t.value=Object.fromEntries(e.value.map(a=>{let l=a.id;return l||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),l=i.get(a),l||(l="path-"+r++,i.set(a,l))),s.add(l),[l,a]})),n.value)for(const[a,l]of Array.from(i.entries()))s.has(l)||i.delete(a)}else t.value=e.value}),{objects:t,isInCompatibilityModeForPath:n}}function vu(e,t,n,r){if(r){const s=o.ref(r(e[t])),a=l=>{ve(l,s.value)||(s.value=l),ve(l,e[t])||n(`update:${t}`,l)};return o.watch(()=>r(s.value),a),o.watch(()=>e[t],l=>a(r(l))),s.value!==e[t]&&n(`update:${t}`,s.value),s}const i=o.ref(e[t]);return o.watch(()=>e[t],s=>{ve(s,i.value)||(i.value=s)}),o.watch(i,s=>{ve(s,e[t])||n(`update:${t}`,s)}),i}function pn(e,t,n,r){const i=o.reactive(new Set);return o.watch(()=>e[t],()=>{const a=e[t].filter(l=>l in n.value);ve(a,Array.from(i))||(i.clear(),a.forEach(i.add,i))},{deep:!0,immediate:!0}),o.watch(i,()=>{const s=Array.from(i);ve(e[t],s)||r(`update:${t}`,s)}),de(i)}const or=Symbol("selection");function wu(e,t,n){o.provide(or,{selectedNodes:e,selectedEdges:t,selectedPaths:n})}function Eu(){return Z(o.inject(or),"Selections")}const rr=Symbol("layouts");function ku(e){o.provide(rr,e)}function gn(){return Z(o.inject(rr),"Layouts")}function xu(e,t){for(let n=0;n<e.length-1;n++)t(e[n],e[n+1])}function Je(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function Pu(e,t,n){const r=e.indexOf(t);r<0||e.splice(r+1,0,n)}function Su(e,t){const n=["edges","edge-labels","focusring","nodes","node-labels","paths"];return o.computed(()=>{const r=Wl(e.view.builtInLayerOrder).filter(s=>{const a=n.includes(s);return a||console.warn(`Layer ${s} is not a built-in layer.`),a}).reverse(),i=[...n];return xu(r,(s,a)=>{Je(i,a),Pu(i,s,a)}),"edge-label"in t||"edges-label"in t||Je(i,"edge-labels"),e.node.focusring.visible||Je(i,"focusring"),e.node.label.visible===!1&&Je(i,"node-labels"),e.path.visible||Je(i,"paths"),i})}const ir=()=>new Promise(e=>o.nextTick(e)),Cu=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],Mu=o.defineComponent({__name:"VSelectionBox",props:{box:null,config:null},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("rect",{class:"v-ng-selection-box",x:Math.round(e.box.pos.x),y:Math.round(e.box.pos.y),width:Math.ceil(e.box.size.width),height:Math.ceil(e.box.size.height),fill:e.config.color,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeDasharray},null,8,Cu))}}),uf="",Tu=["points","fill"],Ou=o.defineComponent({__name:"VMarkerHeadArrow",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=o.computed(()=>{const r=t.width,i=t.height;return t.isSource?`${r} ${i}, 0 ${i/2}, ${r} 0`:`0 0, ${r} ${i/2}, 0 ${i}`});return(r,i)=>(o.openBlock(),o.createElementBlock("polygon",{points:o.unref(n),fill:e.color},null,8,Tu))}}),Bu=["points","stroke-width","stroke"],$u=o.defineComponent({__name:"VMarkerHeadAngle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=o.computed(()=>t.units==="strokeWidth"?1:Math.min(t.width,t.height)/5),r=o.computed(()=>{const i=n.value/2,s=t.width,a=t.height;return t.isSource?`${s-i} ${a-i}, ${i} ${a/2}, ${s-i} ${i}`:`${i} ${i}, ${s-i} ${a/2}, ${i} ${a-i}`});return(i,s)=>(o.openBlock(),o.createElementBlock("polyline",{points:o.unref(r),fill:"none","stroke-width":o.unref(n),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,Bu))}}),zu=["fill","cx","cy","rx","ry"],_u=o.defineComponent({__name:"VMarkerHeadCircle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,zu))}}),Iu=["id","markerWidth","markerHeight","refX","refY","markerUnits"],Au=o.defineComponent({__name:"VMarkerHead",props:{id:null,marker:null,scale:null},setup(e){const t=e,n={arrow:Ou,angle:$u,circle:_u},r=o.computed(()=>t.marker.width*(t.marker.units==="strokeWidth"?1:t.scale)),i=o.computed(()=>t.marker.height*(t.marker.units==="strokeWidth"?1:t.scale)),s=o.computed(()=>{const l=t.marker.margin*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?r.value+l:-l}),a=o.computed(()=>{const l=t.marker.offset*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?l:-l});return(l,c)=>e.marker.type!=="none"&&e.marker.type!=="custom"?(o.openBlock(),o.createElementBlock("marker",{key:0,id:e.id,markerWidth:o.unref(r),markerHeight:o.unref(i),refX:o.unref(s),refY:o.unref(i)/2+o.unref(a),orient:"auto",markerUnits:e.marker.units,class:"v-ng-marker"},[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n[e.marker.type]),{width:o.unref(r),height:o.unref(i),refX:o.unref(s),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,Iu)):o.createCommentVNode("",!0)}}),Lu={class:"v-ng-background-grid","shape-rendering":"crispEdges"},Nu=["d"],Du=["d"],ju=["d"],Zu=["d"],Ru=o.defineComponent({__name:"VBackgroundGrid",setup(e){const{container:t,svgPanZoom:n}=Pe(),{zoomLevel:r}=re(),i=Qc(),s=Yl(),a=o.ref({x:0,y:0}),l=o.ref({width:500,height:500});o.onMounted(()=>{var E;const h=(E=n.value)==null?void 0:E.getPan();h&&(a.value={x:-h.x,y:-h.y});const g=t.value.getBoundingClientRect();l.value={width:g.width,height:g.height}}),i.on("view:resize",h=>{l.value={width:h.width,height:h.height}}),i.on("view:pan",h=>{a.value={x:-h.x,y:-h.y}}),i.on("view:zoom",()=>{var g;const h=(g=n.value)==null?void 0:g.getPan();h&&(a.value={x:-h.x,y:-h.y})});const c=o.ref([]),d=o.ref([]),u=o.ref([]),f=o.ref([]);return o.watchEffect(()=>{const h=[],g=[],E=[],x=[],k=1/r.value,m=s.grid.interval,v=a.value.x*k,w=a.value.y*k,b=Math.floor(l.value.width/m+1)*m,p=Math.floor(l.value.height/m+1)*m,y=(a.value.x+b)*k,S=(a.value.y+p)*k,C=s.grid.thickIncrements,O=s.grid.line.dasharray,M=s.grid.thick.dasharray;let T={stroke:s.grid.thick.color,"stroke-width":s.grid.thick.width,"stroke-dasharray":M,"stroke-dashoffset":M?v/k:void 0},$={stroke:s.grid.line.color,"stroke-width":s.grid.line.width,"stroke-dasharray":O,"stroke-dashoffset":O?v/k:void 0};const N=(a.value.x+b)*k;for(let L=w;L<=S;L+=m){const V=Math.floor(L/m);C&&V%C===0?h.push([V,V*m,v,N,T]):E.push([V,V*m,v,N,$])}T=J({},T),T["stroke-dashoffset"]=M?w/k:void 0,$=J({},$),$["stroke-dashoffset"]=O?w/k:void 0;const F=(a.value.y+p)*k;for(let L=v;L<=y;L+=m){const V=Math.floor(L/m);C&&V%C===0?g.push([V,V*m,w,F,T]):x.push([V,V*m,w,F,$])}d.value=h,c.value=g,f.value=E,u.value=x}),(h,g)=>(o.openBlock(),o.createElementBlock("g",Lu,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(f.value,([E,x,k,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nv${E}`,d:`M ${k} ${x} L ${m} ${x}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Nu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(u.value,([E,x,k,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nh${E}`,d:`M ${x} ${k} L ${x} ${m}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Du))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(d.value,([E,x,k,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`tv${E}`,d:`M ${k} ${x} L ${m} ${x}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,ju))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.value,([E,x,k,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`th${E}`,d:`M ${x} ${k} L ${x} ${m}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Zu))),128))]))}}),df="",Vu=o.defineComponent({__name:"VBackgroundViewport",setup(e){const{viewport:t}=Pe(),n=o.ref(),r=(s,a,l)=>{s.forEach(c=>{var d;return a.setAttribute(c,(d=l.getAttribute(c))!=null?d:"")})},i=new MutationObserver(s=>{if(!n.value)return;const a=s.map(l=>{var c;return(c=l.attributeName)!=null?c:""}).filter(Boolean);r(a,n.value,t.value)});return o.onMounted(()=>{const s=["transform","style"];i.observe(t.value,{attributes:!0,attributeFilter:s}),n.value&&r(s,n.value,t.value)}),o.onUnmounted(()=>{i.disconnect()}),(s,a)=>(o.openBlock(),o.createElementBlock("g",{ref_key:"background",ref:n,class:"v-ng-background-viewport"},[o.renderSlot(s.$slots,"default")],512))}}),Hu=["d","stroke-width"],Wu=o.defineComponent({__name:"VEdgeBackground",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=mt(),{handleEdgePointerDownEvent:i,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:a,handleEdgeClickEvent:l,handleEdgeDoubleClickEvent:c,handleEdgeContextMenu:d}=Ye(),u=o.computed(()=>{const h=t.state.position;if(t.state.loop){const{radius:g,isLargeArc:E,isClockwise:x}=t.state.loop,[k,m]=g,v=E?1:0,w=x?1:0;return`M ${h.p1.x} ${h.p1.y} A ${k} ${m} 0 ${v} ${w} ${h.p2.x} ${h.p2.y}`}else{if(r.type==="straight"||!t.state.curve)return`M ${h.p1.x} ${h.p1.y} L ${h.p2.x} ${h.p2.y}`;{const g=[...t.state.curve.control,{x:h.p2.x,y:h.p2.y}],E=[];return E.push(`M ${h.p1.x} ${h.p1.y}`),Nt(g,2).forEach(([x,k])=>E.push(`Q ${x.x} ${x.y} ${k.x} ${k.y}`)),E.join(" ")}}}),f=o.computed(()=>(t.state.line.stroke.width+10)*n.value);return(h,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line-background":!0,selectable:e.state.selectable}),d:o.unref(u),stroke:"transparent","stroke-width":o.unref(f),fill:"none",onPointerdown:g[0]||(g[0]=o.withModifiers(E=>o.unref(i)(e.id,E),["stop"])),onPointerenterPassive:g[1]||(g[1]=E=>o.unref(s)(e.id,E)),onPointerleavePassive:g[2]||(g[2]=E=>o.unref(a)(e.id,E)),onClick:g[3]||(g[3]=o.withModifiers(E=>o.unref(l)(e.id,E),["stop"])),onDblclick:g[4]||(g[4]=o.withModifiers(E=>o.unref(c)(e.id,E),["stop"])),onContextmenu:g[5]||(g[5]=E=>o.unref(d)(e.id,E))},null,42,Hu))}}),ff="",Fu=o.defineComponent({__name:"VEdgeBackgrounds",setup(e){const{edgeStates:t,edgeGroupStates:n,layouts:r}=ce();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n).edgeGroups,({summarize:a,edges:l})=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[a?o.createCommentVNode("",!0):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(l,(c,d)=>(o.openBlock(),o.createBlock(Wu,{key:d,id:d,state:o.unref(t)[d],"source-pos":o.unref(r).nodes[c.source],"target-pos":o.unref(r).nodes[c.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),Uu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],sr=o.defineComponent({__name:"VLine",props:{p1:null,p2:null,config:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>Ge(t.config.dasharray,n.value)),s=o.computed(()=>{const a=t.config.animate?ht(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return a?{"--animation-speed":a}:void 0});return(a,l)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:`M ${e.p1.x} ${e.p1.y} L ${e.p2.x} ${e.p2.y}`,stroke:e.config.color,"stroke-width":o.unref(r),"stroke-dasharray":o.unref(i),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(s))},null,14,Uu))}}),Gu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],qu=o.defineComponent({__name:"VArc",props:{p1:null,p2:null,radius:null,isLargeArc:{type:Boolean},isClockwise:{type:Boolean},config:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>Ge(t.config.dasharray,n.value)),s=o.computed(()=>{const l=t.config.animate?ht(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?{"--animation-speed":l}:void 0}),a=o.computed(()=>{const{p1:l,p2:c,radius:d,isLargeArc:u,isClockwise:f}=t,[h,g]=d,E=u?1:0,x=f?1:0;return`M ${l.x} ${l.y} A ${h} ${g} 0 ${E} ${x} ${c.x} ${c.y}`});return(l,c)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:o.unref(a),stroke:e.config.color,"stroke-width":o.unref(r),"stroke-dasharray":o.unref(i),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(s)),fill:"none"},null,14,Gu))}}),Xu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],Ku=o.defineComponent({__name:"VEdgeCurved",props:{state:null,config:null,markerStart:{default:void 0},markerEnd:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var u,f;const l=t.state.position,c=[...(f=(u=t.state.curve)==null?void 0:u.control)!=null?f:[],{x:l.p2.x,y:l.p2.y}],d=[];return d.push(`M ${l.p1.x} ${l.p1.y}`),Nt(c,2).forEach(([h,g])=>d.push(`Q ${h.x} ${h.y} ${g.x} ${g.y}`)),d.join(" ")}),i=o.computed(()=>t.config.width*n.value),s=o.computed(()=>Ge(t.config.dasharray,n.value)),a=o.computed(()=>{const l=t.config.animate?ht(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?{"--animation-speed":l}:void 0});return(l,c)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:o.unref(r),fill:"none",stroke:e.config.color,"stroke-width":o.unref(i),"stroke-dasharray":o.unref(s),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(a)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,Xu))}}),Yu=o.defineComponent({__name:"VEdge",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=mt();return(n,r)=>e.state.loop?(o.openBlock(),o.createBlock(qu,o.mergeProps({key:0},e.state.position,{radius:e.state.loop.radius,"is-large-arc":e.state.loop.isLargeArc,"is-clockwise":e.state.loop.isClockwise,class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):o.unref(t).type=="straight"||!e.state.curve?(o.openBlock(),o.createBlock(sr,o.mergeProps({key:1,"data-edge-id":e.id},e.state.position,{class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(o.openBlock(),o.createBlock(Ku,{key:2,"data-edge-id":e.id,class:o.normalizeClass([{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"]),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),hf="",Ju=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],Qu=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],Qe=o.defineComponent({__name:"VShape",props:{baseX:{default:0},baseY:{default:0},config:null},setup(e){const t=e,{scale:n}=re(),r=o.ref(t.baseX),i=o.ref(t.baseY),s=o.ref(0),a=o.ref("#000000"),l=o.ref(void 0),c=o.ref(0),d=o.ref(0),u=o.ref(0),f=o.ref(0);return o.watchEffect(()=>{var g;const h=n.value;s.value=t.config.strokeWidth*h,a.value=(g=t.config.strokeColor)!=null?g:"none",l.value=Ge(t.config.strokeDasharray,h),t.config.type==="circle"?(r.value=t.baseX,i.value=t.baseY,c.value=t.config.radius*h):(d.value=t.config.width*h,u.value=t.config.height*h,f.value=t.config.borderRadius*h,r.value=t.baseX-d.value/2,i.value=t.baseY-u.value/2)}),(h,g)=>e.config.type==="circle"?(o.openBlock(),o.createElementBlock("circle",{key:0,class:"v-ng-shape-circle",cx:r.value,cy:i.value,r:c.value,fill:e.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Ju)):(o.openBlock(),o.createElementBlock("rect",{key:1,class:"v-ng-shape-rect",x:r.value,y:i.value,width:d.value,height:u.value,rx:f.value,ry:f.value,fill:e.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Qu))}}),ed=["rx","ry","fill","transform"],td=["x","y","dominant-baseline","font-family","font-size","fill"],nd=["x","dy","dominant-baseline"],et=o.defineComponent({__name:"VLabelText",props:{text:null,x:{default:0},y:{default:0},dominantBaseline:{default:"central"},config:null},setup(e){const t=e,n=o.useAttrs(),{scale:r}=re(),i=o.computed(()=>{var k,m;return(m=(k=t.text)==null?void 0:k.toString().split(/\r?\n/))!=null?m:""}),s=o.computed(()=>{var k;return(k=n["font-size"])!=null?k:t.config.fontSize*r.value}),a=o.computed(()=>s.value*t.config.lineHeight),l=o.computed(()=>{const k=t.dominantBaseline;return k==="hanging"?0:k==="central"?-(a.value*(i.value.length-1))/2:-a.value*(i.value.length-1)}),c=o.ref(),d=o.ref(""),u=o.reactive({x:0,y:0,width:0,height:0}),f=o.computed(()=>{var b,p;const k=t.config.background;if(!k)return u;let m,v;k.padding instanceof Object?(m=k.padding.vertical,v=k.padding.horizontal):(m=(b=k.padding)!=null?b:0,v=(p=k.padding)!=null?p:0);const w=a.value-s.value;return{x:u.x-v*r.value,y:u.y-m*r.value-w/2,width:u.width+v*2*r.value,height:u.height+m*2*r.value+w}});let h;const g=()=>{t.config.background&&t.config.background.visible?!h&&c.value&&(h=x(c.value,u,d)):(h==null||h.disconnect(),h=void 0)};o.onMounted(()=>g()),o.watch(()=>t.config.background&&t.config.background.visible,(k,m)=>{k!=m&&g()}),o.onUnmounted(()=>{h==null||h.disconnect(),h=void 0});function E(k,m,v){var b;const w=k.getBBox();m.x=w.x,m.y=w.y,m.width=w.width,m.height=w.height,v.value=(b=k.getAttribute("transform"))!=null?b:void 0}function x(k,m,v){const w=new MutationObserver(()=>{E(k,m,v)});return w.observe(k,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),E(k,m,v),w}return(k,m)=>{var v,w,b,p,y,S;return o.openBlock(),o.createElementBlock(o.Fragment,null,[e.config.background&&e.config.background.visible?(o.openBlock(),o.createElementBlock("rect",o.mergeProps({key:0,class:"v-ng-text-background"},o.unref(f),{rx:((w=(v=e.config.background)==null?void 0:v.borderRadius)!=null?w:0)*o.unref(r),ry:((p=(b=e.config.background)==null?void 0:b.borderRadius)!=null?p:0)*o.unref(r),fill:(S=(y=e.config.background)==null?void 0:y.color)!=null?S:"#ffffff",transform:d.value}),null,16,ed)):o.createCommentVNode("",!0),o.createElementVNode("text",o.mergeProps({ref_key:"element",ref:c,class:"v-ng-text"},k.$attrs,{x:e.x,y:e.y,"dominant-baseline":e.dominantBaseline,"font-family":k.$attrs["font-family"]?`${k.$attrs["font-family"]}`:e.config.fontFamily,"font-size":o.unref(s),fill:k.$attrs.fill?`${k.$attrs.fill}`:e.config.color}),[o.unref(i).length<=1?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createTextVNode(o.toDisplayString(e.text),1)],64)):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(o.unref(i),(C,O)=>(o.openBlock(),o.createElementBlock("tspan",{key:O,x:e.x,dy:O==0?o.unref(l):o.unref(a),"dominant-baseline":e.dominantBaseline},o.toDisplayString(C),9,nd))),128))],16,td)],64)}}}),od=o.defineComponent({__name:"VEdgeSummarized",props:{edges:null,layouts:null},setup(e){const t=e,n=mt(),{handleEdgesPointerDownEvent:r,handleEdgesPointerOverEvent:i,handleEdgesPointerOutEvent:s,handleEdgesClickEvent:a,handleEdgesDoubleClickEvent:l,handleEdgesContextMenu:c}=Ye(),{edgeStates:d}=ce(),u=o.ref({p1:{x:0,y:0},p2:{x:0,y:0}}),f=o.ref({x:0,y:0});o.watchEffect(()=>{const w=Object.keys(t.edges).find(b=>b in d);w&&(u.value=d[w].position,f.value={x:(u.value.p1.x+u.value.p2.x)/2,y:(u.value.p1.y+u.value.p2.y)/2})});const h=o.computed(()=>Object.keys(t.edges)),g=o.computed(()=>B.values(n.summarized.label,t.edges)),E=o.computed(()=>B.values(n.summarized.shape,t.edges)),x=o.computed(()=>B.values(n.summarized.stroke,t.edges)),k=o.computed(()=>h.value.some(w=>d[w].hovered)),m=o.computed(()=>h.value.some(w=>d[w].selectable)),v=o.computed(()=>h.value.some(w=>d[w].selected));return(w,b)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-line-summarized":!0,hovered:o.unref(k),selectable:o.unref(m),selected:o.unref(v)}),onPointerdown:b[0]||(b[0]=o.withModifiers(p=>o.unref(r)(o.unref(h),p),["stop"])),onPointerenterPassive:b[1]||(b[1]=p=>o.unref(i)(o.unref(h),p)),onPointerleavePassive:b[2]||(b[2]=p=>o.unref(s)(o.unref(h),p)),onClick:b[3]||(b[3]=o.withModifiers(p=>o.unref(a)(o.unref(h),p),["stop"])),onDblclick:b[4]||(b[4]=o.withModifiers(p=>o.unref(l)(o.unref(h),p),["stop"])),onContextmenu:b[5]||(b[5]=p=>o.unref(c)(o.unref(h),p))},[o.createVNode(sr,o.mergeProps(u.value,{config:o.unref(x),"data-edge-id":o.unref(h)[0]}),null,16,["config","data-edge-id"]),o.createVNode(Qe,{"base-x":f.value.x,"base-y":f.value.y,config:o.unref(E)},null,8,["base-x","base-y","config"]),o.createVNode(et,{text:Object.keys(e.edges).length.toString(),x:f.value.x,y:f.value.y,config:o.unref(g),"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),pf="",rd={class:"v-ng-edge-overlay"},ar=o.defineComponent({__name:"VEdgeOverlay",props:{edgeId:{default:void 0},edge:{default:void 0},edges:{default:()=>({})},state:null,isSummarized:{type:Boolean}},setup(e){const t=e,{svg:n}=Pe(),{scale:r}=re(),i=mt();function s(){return t.isSummarized?B.values(i.summarized.stroke,t.edges):t.state.line.stroke}function a(u){return{source:u.p1,target:u.p2}}function l(u){if(u.curve)return u.curve.center;{const f=u.origin.p1,h=u.origin.p2;return{x:(f.x+h.x)/2,y:(f.y+h.y)/2}}}function c(){var h;if(!n.value)return 0;const u=(h=t.edgeId)!=null?h:Object.keys(t.edges)[0],f=n.value.querySelector(`path[data-edge-id="${u}"]`);return f?f.getTotalLength():0}function d(u){var E;if(!n.value||!isFinite(u))return t.state.position.p1;t.state;const f=(E=t.edgeId)!=null?E:Object.keys(t.edges)[0],h=n.value.querySelector(`path[data-edge-id="${f}"]`);if(!h)return t.state.position.p1;const g=h.getPointAtLength(u);return{x:g.x,y:g.y}}return(u,f)=>(o.openBlock(),o.createElementBlock("g",rd,[e.isSummarized?o.renderSlot(u.$slots,"default",{key:0,edges:e.edges,isSummarized:e.isSummarized,stroke:s(),position:a(e.state.origin),center:l(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:c(),pointAtLength:d}):o.renderSlot(u.$slots,"default",{key:1,edgeId:e.edgeId,edge:e.edge,edges:{[e.edgeId]:e.edge},isSummarized:e.isSummarized,stroke:s(),position:a(e.state.origin),center:l(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:c(),pointAtLength:d})]))}}),id=o.defineComponent({__name:"VEdgeGroups",props:{hasEdgeOverlaySlot:{type:Boolean}},setup(e){const{edgeStates:t,edgeZOrderedList:n,layouts:r}=ce();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[o.unref(Mc)(a)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[(o.openBlock(),o.createBlock(od,{key:a.key,edges:a.group.edges,layouts:o.unref(r).nodes},null,8,["edges","layouts"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(ar,{key:a.key,edges:a.group.edges,state:o.unref(t)[Object.keys(a.group.edges)[0]],"is-summarized":!0},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.normalizeProps(o.guardReactiveProps(l)))]),_:2},1032,["edges","state"])):o.createCommentVNode("",!0)],64)):(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[(o.openBlock(),o.createBlock(Yu,{id:a.key,key:a.key,state:o.unref(t)[a.key],"source-pos":o.unref(r).nodes[a.edge.source],"target-pos":o.unref(r).nodes[a.edge.target]},null,8,["id","state","source-pos","target-pos"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(ar,{key:a.key,"edge-id":a.key,edge:a.edge,state:o.unref(t)[a.key],"is-summarized":!1},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.normalizeProps(o.guardReactiveProps(l)))]),_:2},1032,["edge-id","edge","state"])):o.createCommentVNode("",!0)],64))],64))),256))}}),sd={class:"v-ng-layer-edges"},ad=o.defineComponent({__name:"VEdgesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"edge-overlay"in t);return(r,i)=>(o.openBlock(),o.createElementBlock("g",sd,[o.createVNode(Fu),o.createVNode(id,{"has-edge-overlay-slot":o.unref(n)},o.createSlots({_:2},[o.unref(n)?{name:"default",fn:o.withCtx(s=>[o.renderSlot(r.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(s)))]),key:"0"}:void 0]),1032,["has-edge-overlay-slot"])]))}}),ld=o.defineComponent({__name:"VEdgeLabelPlace",props:{edgeId:null,edge:null,state:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>Lo(t.state.labelPosition,t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value));return(i,s)=>e.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edgeId:e.edgeId,edge:e.edge,config:e.state.label,area:o.unref(r),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(n)})}}),cd=o.defineComponent({__name:"VEdgeLabelsPlace",props:{edges:null,state:null,summarizeState:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var i,s;return Lo(t.state.labelPosition,(s=(i=t.summarizeState)==null?void 0:i.stroke)!=null?s:t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value)});return(i,s)=>e.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edges:e.edges,config:e.state.label,area:o.unref(r),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(n)})}}),ud={class:"v-ng-edge-labels"},dd=o.defineComponent({__name:"VEdgeLabels",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){const{edgeStates:t,edgeGroupStates:n,summarizedEdgeStates:r}=ce(),i=o.computed(()=>{const a={},l={};return Object.entries(n.edgeGroups).forEach(([c,d])=>{Object.keys(d.edges).length>0&&(d.summarize?l[c]=d:a[c]=d)}),{individual:a,summarized:l}});function s(a){return Object.keys(a.edges)[0]}return(a,l)=>(o.openBlock(),o.createElementBlock("g",ud,[e.enableEdgeLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(o.unref(i).individual,(c,d)=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:d},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.edges,(u,f)=>(o.openBlock(),o.createBlock(ld,{key:f,"edge-id":f,edge:u,state:o.unref(t)[f]},{default:o.withCtx(h=>[o.renderSlot(a.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(h)))]),_:2},1032,["edge-id","edge","state"]))),128))],64))),128)):o.createCommentVNode("",!0),e.enableEdgesLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(o.unref(i).summarized,(c,d)=>(o.openBlock(),o.createBlock(cd,{key:d,edges:c.edges,state:o.unref(t)[s(c)],"summarize-state":o.unref(r)[s(c)]},{default:o.withCtx(u=>[o.renderSlot(a.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(u)))]),_:2},1032,["edges","state","summarize-state"]))),128)):o.createCommentVNode("",!0)]))}}),gf="",fd=o.defineComponent({__name:"VEdgeLabelsLayer",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){return(t,n)=>(o.openBlock(),o.createBlock(dd,{"enable-edge-label":e.enableEdgeLabel,"enable-edges-label":e.enableEdgesLabel,class:"v-ng-layer-edge-labels"},o.createSlots({_:2},[e.enableEdgeLabel?{name:"edge-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"0"}:void 0,e.enableEdgesLabel?{name:"edges-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"1"}:void 0]),1032,["enable-edge-label","enable-edges-label"]))}}),hd=o.defineComponent({__name:"VNodeFocusRing",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.x)||0}),r=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.y)||0}),i=gt(),s=o.reactive({});return o.watchEffect(()=>{var l,c,d;const a=t.state.shape;if(a.type==="circle"){const u={type:"circle",radius:a.radius+((l=a.strokeWidth)!=null?l:0)/2+i.focusring.padding+i.focusring.width/2,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,u)}else{const u={type:"rect",width:a.width+((c=a.strokeWidth)!=null?c:0)+i.focusring.padding*2+i.focusring.width,height:a.height+((d=a.strokeWidth)!=null?d:0)+i.focusring.padding*2+i.focusring.width,borderRadius:a.borderRadius>0?a.borderRadius+i.focusring.padding:0,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,u)}}),(a,l)=>(o.openBlock(),o.createBlock(Qe,{class:"v-ng-node-focusring","base-x":o.unref(n),"base-y":o.unref(r),config:s},null,8,["base-x","base-y","config"]))}}),mf="",pd={class:"v-ng-layer-nodes-selections"},gd=o.defineComponent({__name:"VFocusringLayer",setup(e){const{nodeStates:t}=ce(),{selectedNodes:n}=Eu(),r=gn();return(i,s)=>(o.openBlock(),o.createElementBlock("g",pd,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createBlock(hd,{id:a,key:a,state:o.unref(t)[a],pos:o.unref(r).nodes[a]},null,8,["id","state","pos"]))),128))]))}}),md=["transform"],lr=o.defineComponent({__name:"VNode",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var f;return((f=t.pos)==null?void 0:f.x)||0}),r=o.computed(()=>{var f;return((f=t.pos)==null?void 0:f.y)||0}),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:c,handleNodeDoubleClickEvent:d,handleNodeContextMenu:u}=Ye();return(f,h)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-node":!0,hover:e.state.hovered,selected:e.state.selected}),transform:`translate(${o.unref(n)} ${o.unref(r)})`,onPointerdown:h[0]||(h[0]=o.withModifiers(g=>o.unref(s)(e.id,g),["stop"])),onPointerenterPassive:h[1]||(h[1]=g=>o.unref(a)(e.id,g)),onPointerleavePassive:h[2]||(h[2]=g=>o.unref(l)(e.id,g)),onClick:h[3]||(h[3]=o.withModifiers(g=>o.unref(c)(e.id,g),["stop"])),onDblclick:h[4]||(h[4]=o.withModifiers(g=>o.unref(d)(e.id,g),["stop"])),onContextmenu:h[5]||(h[5]=g=>o.unref(u)(e.id,g))},[o.renderSlot(f.$slots,"override-node",{nodeId:e.id,scale:o.unref(i),config:e.state.shape,class:o.normalizeClass({draggable:e.state.draggable,selectable:e.state.selectable})},()=>[o.createVNode(Qe,{config:e.state.shape,class:o.normalizeClass({"v-ng-node-default":!0,draggable:e.state.draggable,selectable:e.state.selectable})},null,8,["config","class"])])],42,md))}}),yf="",yd=o.defineComponent({__name:"VNodesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node"in t),{nodeZOrderedList:r}=ce(),i=gt(),s=gn();return(a,l)=>o.unref(n)?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),c=>(o.openBlock(),o.createBlock(lr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},{"override-node":o.withCtx(d=>[o.renderSlot(a.$slots,"override-node",o.normalizeProps(o.guardReactiveProps(d)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),c=>(o.openBlock(),o.createBlock(lr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),cr={[z.NORTH]:0,[z.NORTH_EAST]:1,[z.EAST]:2,[z.SOUTH_EAST]:3,[z.SOUTH]:4,[z.SOUTH_WEST]:5,[z.WEST]:6,[z.NORTH_WEST]:7,[z.CENTER]:-1},bd=[(e,t)=>xe(e,0,t?90:60),(e,t)=>xe(e,45,t?90:45),(e,t)=>xe(e,90,t?60:30),(e,t)=>xe(e,135,t?90:45),(e,t)=>xe(e,180,t?90:60),(e,t)=>xe(e,225,t?90:45),(e,t)=>xe(e,270,t?60:30),(e,t)=>xe(e,315,t?90:45)];function vd(e,t,n,r,i){if(i===z.CENTER)return z.CENTER;const s=[];Object.entries(n).forEach(([d,u])=>{let f=!1;if(u.nodeId===e){const g=r(d);g&&(f=!0,u=nt(J({},u),{pos:{x:g.x,y:g.y}}))}const h=(Qt(Gt(u.pos,t))+360+90)%360;s.push([h,f])});const a=wd(i),c=[a,(a+4)%8,(a+2)%8,(a-2+8)%8,(a+1)%8,(a-1+8)%8,(a+3)%8,(a-3+8)%8].find(d=>s.every(u=>!bd[d](...u)));return c===void 0?i:Ed(c,i)}function xe(e,t,n){e%=360;const r=(t-n+360)%360,i=(t+n)%360;return r<=i?r<e&&e<i:r<e||e<i}function wd(e){var t;return(t=cr[e])!=null?t:0}function Ed(e,t){var n,r;return(r=(n=Object.entries(cr)[e])==null?void 0:n[0])!=null?r:t}const kd=["transform"],ur=o.defineComponent({__name:"VNodeLabel",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=gt(),{edgeStates:r}=ce(),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:c,handleNodeDoubleClickEvent:d,handleNodeContextMenu:u}=Ye(),f=o.computed(()=>{var M;return((M=t.pos)==null?void 0:M.x)||0}),h=o.computed(()=>{var M;return((M=t.pos)==null?void 0:M.y)||0}),g=o.computed(()=>t.state.label.direction===z.CENTER?0:t.state.label.margin*i.value),E=o.ref(0),x=o.ref(0),k=o.ref(0),m=o.ref(0),v=o.computed(()=>{var N;const M=t.state.label.direction,T=t.state.label.directionAutoAdjustment;if(T===!1)return M;const $={x:f.value,y:h.value};return T===!0?vd(t.state.id,$,t.state.oppositeNodes,F=>{var L,V;return(V=(L=r[F])==null?void 0:L.loop)==null?void 0:V.center},M):(N=T({nodeId:t.state.id,pos:$,oppositeNodes:t.state.oppositeNodes}))!=null?N:M}),w=o.computed(()=>{switch(v.value){case z.CENTER:case z.NORTH:case z.SOUTH:return"middle";case z.EAST:case z.NORTH_EAST:case z.SOUTH_EAST:return"start";case z.WEST:case z.NORTH_WEST:case z.SOUTH_WEST:default:return"end"}}),b=o.computed(()=>{switch(v.value){case z.NORTH:case z.NORTH_EAST:case z.NORTH_WEST:return"text-top";case z.SOUTH:case z.SOUTH_EAST:case z.SOUTH_WEST:return"hanging";case z.CENTER:case z.EAST:case z.WEST:default:return"central"}}),p=o.computed(()=>{switch(v.value){case z.CENTER:case z.NORTH:case z.SOUTH:return 0;case z.EAST:return x.value;case z.WEST:return-x.value;case z.NORTH_EAST:case z.SOUTH_EAST:return m.value;case z.NORTH_WEST:case z.SOUTH_WEST:default:return-m.value}}),y=o.computed(()=>{switch(v.value){case z.NORTH:return-E.value;case z.SOUTH:return E.value;case z.CENTER:case z.EAST:case z.WEST:return 0;case z.NORTH_EAST:case z.NORTH_WEST:return-k.value;case z.SOUTH_EAST:case z.SOUTH_WEST:default:return k.value}});o.watchEffect(()=>{const M=i.value,T=t.state.shape;if(T.type=="circle"){const $=T.radius*M,N=$+g.value,F=Math.sqrt(Q(N,2)/2);E.value=$+g.value,x.value=$+g.value,k.value=F,m.value=F}else{const $=T.borderRadius*M,N=T.width*M,F=T.height*M,L=$+g.value,V=Math.sqrt(Q(L,2)/2);E.value=F/2+g.value,x.value=N/2+g.value,k.value=F/2-$+V,m.value=N/2-$+V}});const S=o.computed(()=>M=>n.label.handleNodeEvents?{pointerdown:T=>{T.stopPropagation(),s(M,T)},pointerenter:T=>a(M,T),pointerleave:T=>l(M,T),click:T=>{T.stopPropagation(),c(M,T)},dblclick:T=>{T.stopPropagation(),d(M,T)},contextmenu:T=>{u(M,T)}}:{}),C=o.computed(()=>{const M=n.label.handleNodeEvents;return{"v-ng-node-label":!0,hover:M&&t.state.hovered,selected:M&&t.state.selected}}),O=o.computed(()=>{const M=n.label.handleNodeEvents;return{draggable:M&&t.state.draggable,selectable:M&&t.state.selectable}});return(M,T)=>(o.openBlock(),o.createElementBlock("g",o.mergeProps({class:o.unref(C),transform:`translate(${o.unref(f)} ${o.unref(h)})`},o.toHandlers(o.unref(S)(e.id),!0)),[o.renderSlot(M.$slots,"override-node-label",{nodeId:e.id,scale:o.unref(i),text:e.state.labelText,x:o.unref(p),y:o.unref(y),config:e.state.label,shape:e.state.shape,textAnchor:o.unref(w),dominantBaseline:o.unref(b),class:o.normalizeClass(o.unref(O))},()=>[o.createVNode(et,{text:e.state.labelText,x:0,y:0,config:e.state.label,"text-anchor":o.unref(w),"dominant-baseline":o.unref(b),class:o.normalizeClass(o.unref(O)),transform:`translate(${o.unref(p)} ${o.unref(y)})`},null,8,["text","config","text-anchor","dominant-baseline","class","transform"])])],16,kd))}}),bf="",xd=o.defineComponent({__name:"VNodeLabelsLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node-label"in t),{nodeZOrderedList:r}=ce(),i=gt(),s=gn(),a=o.computed(()=>l(r.value));function l(c){return c.filter(d=>{var u;return d.label.visible&&((u=d.labelText)!=null?u:!1)})}return(c,d)=>o.unref(n)?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(a),u=>(o.openBlock(),o.createBlock(ur,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},{"override-node-label":o.withCtx(f=>[o.renderSlot(c.$slots,"override-node-label",o.normalizeProps(o.guardReactiveProps(f)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(a),u=>(o.openBlock(),o.createBlock(ur,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),Pd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],Sd=o.defineComponent({__name:"VPath",props:{path:null},setup(e){const t=e,{nodeStates:n,edgeStates:r,layouts:i}=ce(),{scale:s}=re(),a=Po();function l(h){if(h.edges.length===0)return[];const g=B.value(a.margin,h.path)*s.value;return gc(h,n,i.nodes,r,s.value,a.curveInNode,a.end,g)}function c(h){const g=l(h);let E=!0;return g.map(x=>{if(x===null)E=!0;else{if(typeof x=="string")return x;if(x instanceof Array){x=[...x];const k=[];if(x.length%2===1){const m=x[0];x=x.slice(1),k.push(`L ${m.x} ${m.y}`)}return Nt(x,2).map(([m,v])=>k.push(`Q ${m.x} ${m.y} ${v.x} ${v.y}`)),k.join(" ")}else{const k=E;return E=!1,`${k?"M ":"L "}${x.x} ${x.y}`}}}).join(" ")}const d=o.computed(()=>{const h=t.path;return h.selected?B.values(a.selected,h.path):h.hovered&&a.hover?B.values(a.hover,h.path):B.values(a.normal,h.path)}),u=o.computed(()=>Ge(d.value.dasharray,s.value)),f=o.computed(()=>{const h=d.value.animate?ht(d.value.dasharray)*d.value.animationSpeed*s.value:!1;return h?{"--animation-speed":h}:void 0});return(h,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-path":!0,animate:o.unref(d).animate,clickable:e.path.clickable,hoverable:e.path.hoverable}),d:c(e.path),fill:"none",stroke:o.unref(d).color,"stroke-width":o.unref(d).width*o.unref(s),"stroke-dasharray":o.unref(u),"stroke-linecap":o.unref(d).linecap,"stroke-linejoin":o.unref(d).linejoin,style:o.normalizeStyle(o.unref(f))},null,14,Pd))}}),vf="",Cd=o.defineComponent({__name:"VPaths",setup(e){const{pathZOrderedList:t}=ce(),n=Po(),{handlePathPointerDownEvent:r,handlePathPointerOverEvent:i,handlePathPointerOutEvent:s,handlePathClickEvent:a,handlePathDoubleClickEvent:l,handlePathContextMenu:c}=Ye();return(d,u)=>(o.openBlock(),o.createBlock(o.TransitionGroup,{name:o.unref(n).transition,css:!!o.unref(n).transition,tag:"g",class:"v-ng-paths"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(t),f=>(o.openBlock(),o.createBlock(Sd,{key:f.id,path:f,onPointerdown:h=>o.unref(r)(f.id,h),onPointerenterPassive:h=>o.unref(i)(f.id,h),onPointerleavePassive:h=>o.unref(s)(f.id,h),onClick:o.withModifiers(h=>o.unref(a)(f.id,h),["stop"]),onDblclick:o.withModifiers(h=>o.unref(l)(f.id,h),["stop"]),onContextmenu:h=>o.unref(c)(f.id,h)},null,8,["path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),Md=o.defineComponent({__name:"VPathsLayer",setup(e){return(t,n)=>(o.openBlock(),o.createBlock(Cd))}}),Td={key:0},dr=o.defineComponent({__name:"VNetworkGraph",props:{nodes:{default:()=>({})},edges:{default:()=>({})},paths:{default:()=>({})},layouts:{default:()=>({})},zoomLevel:{default:1},selectedNodes:{default:()=>[]},selectedEdges:{default:()=>[]},selectedPaths:{default:()=>[]},configs:{default:()=>({})},layers:{default:()=>({})},eventHandlers:{default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(e,{expose:t,emit:n}){const r=e,i=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],s=o.useSlots(),a=o.toRef(r,"nodes"),l=o.toRef(r,"edges"),{objects:c,isInCompatibilityModeForPath:d}=bu(o.toRef(r,"paths")),u=Jc();Object.entries(r.eventHandlers).forEach(([P,I])=>{u.on(P,I)});const f=Kl(o.toRef(r,"configs")),h=o.computed(()=>{const P=new Set(Object.keys(s));i.forEach(_=>P.delete(_));const I=Object.fromEntries(q.map(_=>[_,[]]));return Object.assign(I,Object.entries(r.layers).reduce((_,[j,K])=>(P.delete(j),K in _?_[K].push(j):_[K]=[j],_),{})),I.root.push(...P),I}),g=o.computed(()=>f.view.grid.visible),E=o.computed(()=>{const P=h.value;return g.value||P.background.length>0||P.grid.length>0}),x=Su(f,s),k=o.ref(),m=o.ref(),v=o.ref(),w=o.ref(0),b=o.computed(()=>w.value!==0),p=vu(r,"zoomLevel",n,P=>(P=Math.max(P,f.view.minZoomLevel),P=Math.min(P,f.view.maxZoomLevel),P)),{svgPanZoom:y,onSvgPanZoomMounted:S,onSvgPanZoomUnmounted:C}=pu(m,{viewportSelector:".v-ng-viewport",minZoom:f.view.minZoomLevel,maxZoom:f.view.maxZoomLevel,dblClickZoomEnabled:br(f.view),mouseWheelZoomEnabled:bn(f.view),fit:f.view.autoPanAndZoomOnLoad==="fit-content",center:f.view.autoPanAndZoomOnLoad!==!1,zoomEnabled:f.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:P=>{var _,j;if(w.value===2)return;const I=(j=(_=y.value)==null?void 0:_.getRealZoom())!=null?j:1;Math.abs(p.value-I)>=1e-6&&(p.value=I,u.emit("view:zoom",I))},panEnabled:f.view.panEnabled,onPan:P=>{w.value!==2&&u.emit("view:pan",P)}});Tt({container:k,svg:m,viewport:v,svgPanZoom:y});const O={width:0,height:0},M=globalThis.ResizeObserver?new ResizeObserver(()=>{var I,_,j;if((I=y.value)==null||I.resize(),!f.view.autoPanOnResize)return;const P=(_=k.value)==null?void 0:_.getBoundingClientRect();if(P){const K=-(O.width-P.width)/2,Mt=-(O.height-P.height)/2;(j=y.value)==null||j.panBy({x:K,y:Mt});const{width:Ze,height:vn}=P;(O.width!==Ze||O.height!==vn)&&(Object.assign(O,{width:Ze,height:vn}),u.emit("view:resize",{x:P.x,y:P.y,width:Ze,height:vn}))}}):void 0;S(()=>{var K,Mt,Ze;const P=Z(k.value,"svg-pan-zoom container");M==null||M.observe(P),(Mt=(K=f.view).onSvgPanZoomInitialized)==null||Mt.call(K,Z(y.value,"svg-pan-zoom instance"));const I=P.getBoundingClientRect(),{width:_,height:j}=I;Object.assign(O,{width:_,height:j}),(Ze=v.value)==null||Ze.addEventListener("touchstart",vr,{passive:!1})}),C(()=>{var P;M==null||M.disconnect(),(P=v.value)==null||P.removeEventListener("touchstart",vr)});const T=P=>{var I;(I=y.value)==null||I.applyAbsoluteZoomLevel(P,f.view.minZoomLevel,f.view.maxZoomLevel)};o.watch(()=>f.view.panEnabled,P=>{var I;(I=y.value)==null||I.setPanEnabled(P)}),o.watch(()=>[f.view.zoomEnabled,br(f.view),bn(f.view)],()=>{const P=y.value;P&&nf(P,f.view.zoomEnabled,f.view.doubleClickZoomEnabled,f.view.mouseWheelZoomEnabled)}),o.watch(p,P=>T(P)),o.watch(()=>[f.view.minZoomLevel,f.view.maxZoomLevel],P=>{T(p.value)});const{scale:$}=gu(p,f.view);S(()=>{const P=r.zoomLevel;T(P)});const N=()=>ue(this,null,function*(){var P;Object.keys(r.nodes).length>0&&((P=y.value)==null||P.updateBBox(),yield ir())}),F=()=>ue(this,null,function*(){yield N(),y.value&&(y.value.fitToContents(),u.emit("view:fit",void 0))}),L=()=>ue(this,null,function*(){var P;yield N(),(P=y.value)==null||P.center()}),V=()=>{var P,I;return(I=(P=y.value)==null?void 0:P.getViewBox())!=null?I:{top:0,bottom:0,left:0,right:0}},ae=P=>{var I;return(I=y.value)==null?void 0:I.setViewBox(P)},X=pn(r,"selectedNodes",a,n);o.watch(X,P=>u.emit("node:select",Array.from(P)));const he=pn(r,"selectedEdges",l,n);o.watch(he,P=>u.emit("edge:select",Array.from(P)));const _e=pn(r,"selectedPaths",c,n);o.watch(_e,P=>u.emit("path:select",Array.from(P))),wu(X,he,_e);const tt=de(new Set),ne=de(new Set),je=de(new Set),le=de({nodes:{}});ku(le),o.watch(()=>r.layouts,()=>Object.assign(le,r.layouts),{deep:!0,immediate:!0}),o.watch(le,()=>n("update:layouts",le),{deep:!0});const mn=Ec(),yn=o.ref(!1);u.on("node:dragstart",P=>yn.value=!0),u.on("node:dragend",P=>yn.value=!1),u.on("view:mode",P=>{var I,_,j,K;f.view.panEnabled&&(P==="default"?(I=y.value)==null||I.enablePan():(_=y.value)==null||_.disablePan()),f.view.zoomEnabled&&(P==="default"?(j=y.value)==null||j.enableZoom():(K=y.value)==null||K.disableZoom())});const Ld=o.computed(()=>f.view.panEnabled||f.view.zoomEnabled||f.node.draggable),{nodeStates:Nd,edgeStates:Dd,pathStates:jd}=Cc(an(a,X,tt),an(l,he,ne),an(c,_e,je),o.readonly(f),le,mn,$),Zd=o.computed(()=>bn(f.view)),{isBoxSelectionMode:Rd,selectionBox:pr,startBoxSelection:Vd,stopBoxSelection:Hd}=Kc(m,o.readonly(le),o.readonly(p),Nd,Dd,jd,X,he,_e,tt,ne,je,d,Zd,f,u),gr=()=>({layouts:de(le.nodes),nodePositions:o.toRef(le,"nodes"),nodes:a,edges:l,configs:o.readonly(f),scale:o.readonly($),emitter:u,svgPanZoom:Z(y.value)});o.watch(()=>f.view.layoutHandler,(P,I)=>{I.deactivate(),P.activate(gr())});const{transitionWhile:Wd,transitionOption:mr}=yu(),Fd=o.computed(()=>{const P=mr.value;return P.enabled?{"--transition-duration":P.duration+"ms","--transition-function":P.timingFunction}:{}});S(()=>ue(this,null,function*(){if(f.view.onBeforeInitialDisplay){const _=f.view.onBeforeInitialDisplay();ec(_)&&(yield _)}const P=Z(y.value,"svg-pan-zoom");f.view.layoutHandler.activate(gr()),yield ir();const I=f.view.autoPanAndZoomOnLoad;if(f.view.fit||I!==!1){const _=Object.keys(r.nodes).length==0,j=P.getPan();if(_||I==="center-zero"){yield N();const K=P.getSizes();P.pan({x:K.width/2,y:K.height/2})}else I==="fit-content"||f.view.fit?yield F():I==="center-content"?yield L():yield N();o.nextTick(()=>{const K=P.getPan();j.x===K.x&&j.y===K.y&&u.emit("view:pan",K)})}else yield N();u.emit("view:load"),w.value=1})),C(()=>{w.value=2,u.emit("view:unload"),f.view.layoutHandler.deactivate()});function Ud(){var P;(P=y.value)==null||P.zoomIn()}function Gd(){var P;(P=y.value)==null||P.zoomOut()}function qd(P){var I;(I=y.value)==null||I.pan(P)}function Xd(P){var I;(I=y.value)==null||I.panBy(P)}function Kd(){return Z(y.value).getPan()}function Yd(){const P=Z(y.value).getSizes();return{width:P.width,height:P.height,viewBox:P.viewBox}}function Jd(P){return dn(Z(m.value,"svg"),Z(v.value,"viewport"),P)}function Qd(P){return Hc(Z(m.value,"svg"),Z(v.value,"viewport"),P)}function ef(){return qo(Z(m.value,"svg"),Z(v.value,"viewport"),$.value).outerHTML}function tf(){return ue(this,arguments,function*(P={}){return(yield yr(P)).outerHTML})}function yr(){return ue(this,arguments,function*(P={}){return Fc(Z(m.value,"svg"),Z(v.value,"viewport"),$.value,P)})}t({fitToContents:F,panToCenter:L,getViewBox:V,setViewBox:ae,transitionWhile:Wd,startBoxSelection:Vd,stopBoxSelection:Hd,zoomIn:Ud,zoomOut:Gd,panTo:qd,panBy:Xd,getPan:Kd,getSizes:Yd,translateFromDomToSvgCoordinates:Jd,translateFromSvgToDomCoordinates:Qd,getAsSvg:ef,exportAsSvgText:tf,exportAsSvgElement:yr});function nf(P,I,_,j){P.setZoomEnabled(I),I&&_?P.enableDblClickZoom():P.disableDblClickZoom(),I&&j?P.enableMouseWheelZoom():P.disableMouseWheelZoom()}function br(P){return P.zoomEnabled&&P.doubleClickZoomEnabled}function bn(P){return P.zoomEnabled&&P.mouseWheelZoomEnabled}function vr(P){P.stopPropagation()}return(P,I)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"container",ref:k,class:"v-network-graph v-ng-container"},[(o.openBlock(),o.createElementBlock("svg",{ref_key:"svg",ref:m,class:o.normalizeClass(["v-ng-canvas",{show:o.unref(b),dragging:yn.value,touches:o.unref(Ld),"box-selection-mode":o.unref(Rd)}]),width:"100%",height:"100%"},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).root,_=>o.renderSlot(P.$slots,_,{key:_,scale:o.unref($)})),128)),Object.keys(o.unref(mn).markers).length>0?(o.openBlock(),o.createElementBlock("defs",Td,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(mn).markers,(_,j)=>(o.openBlock(),o.createBlock(Au,{id:j,key:j,marker:_,scale:o.unref($)},null,8,["id","marker","scale"]))),128))])):o.createCommentVNode("",!0),o.unref(E)?(o.openBlock(),o.createBlock(Vu,{key:1},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).background,_=>(o.openBlock(),o.createElementBlock("g",{key:_,class:"v-ng-layer"},[o.renderSlot(P.$slots,_,{scale:o.unref($)})]))),128)),o.unref(g)?(o.openBlock(),o.createBlock(Ru,{key:0})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).grid,_=>(o.openBlock(),o.createElementBlock("g",{key:_,class:"v-ng-layer"},[o.renderSlot(P.$slots,_,{scale:o.unref($)})]))),128))]),_:3})):o.createCommentVNode("",!0),o.createElementVNode("g",{ref_key:"viewport",ref:v,class:o.normalizeClass(["v-ng-viewport",{"v-ng-transition":o.unref(mr).enabled}]),style:o.normalizeStyle(o.unref(Fd))},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).base,_=>(o.openBlock(),o.createElementBlock("g",{key:_,class:"v-ng-layer"},[o.renderSlot(P.$slots,_,{scale:o.unref($)})]))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(x),_=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:_},[_==="edges"?(o.openBlock(),o.createBlock(ad,{key:0},o.createSlots({_:2},["edge-overlay"in o.unref(s)?{name:"edge-overlay",fn:o.withCtx(j=>[o.renderSlot(P.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(j)))]),key:"0"}:void 0]),1024)):_==="edge-labels"?(o.openBlock(),o.createBlock(fd,{key:1,"enable-edge-label":"edge-label"in o.unref(s),"enable-edges-label":"edges-label"in o.unref(s)},{"edge-label":o.withCtx(j=>[o.renderSlot(P.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(j)))]),"edges-label":o.withCtx(j=>[o.renderSlot(P.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(j)))]),_:3},8,["enable-edge-label","enable-edges-label"])):_==="focusring"?(o.openBlock(),o.createBlock(gd,{key:2})):_==="nodes"?(o.openBlock(),o.createBlock(yd,{key:3},{"override-node":o.withCtx(j=>[o.renderSlot(P.$slots,"override-node",o.normalizeProps(o.guardReactiveProps(j)))]),_:3})):_==="node-labels"?(o.openBlock(),o.createBlock(xd,{key:4},{"override-node-label":o.withCtx(j=>[o.renderSlot(P.$slots,"override-node-label",o.normalizeProps(o.guardReactiveProps(j)))]),_:3})):_==="paths"?(o.openBlock(),o.createBlock(Md,{key:5})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h)[_],j=>(o.openBlock(),o.createElementBlock("g",{key:j,class:"v-ng-layer"},[o.renderSlot(P.$slots,j,{scale:o.unref($)})]))),128))],64))),128))],6),o.unref(pr)?(o.openBlock(),o.createBlock(Mu,{key:2,box:o.unref(pr),config:o.unref(f).view.selection.box},null,8,["box","config"])):o.createCommentVNode("",!0)],2))],512))}}),wf="",Od=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Bd={};function $d(e,t){return o.openBlock(),o.createElementBlock("defs",null,[(o.openBlock(),o.createBlock(o.resolveDynamicComponent("style"),null,{default:o.withCtx(()=>[o.renderSlot(e.$slots,"default")]),_:3}))])}const fr=Od(Bd,[["render",$d]]),hr=o.defineComponent({__name:"VEdgeLabel",props:{area:null,config:null,text:{default:""},align:{default:"center"},verticalAlign:{default:"center"},edge:{default:void 0},hovered:{type:Boolean,default:void 0},selected:{type:Boolean,default:void 0},scale:{default:void 0}},setup(e){const t=e,n=o.ref(0),r=o.ref(0),i=o.ref("middle"),s=o.ref("central"),a=o.ref(0);o.watchEffect(()=>{const c=t.area.source,d=t.area.target;t.align==="source"?(c.above.x==d.above.x?i.value=c.above.y>d.above.y?"start":"end":i.value=c.above.x<d.above.x?"start":"end",t.verticalAlign==="above"?(n.value=c.above.x,r.value=c.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=c.below.x,r.value=c.below.y,s.value="hanging"):(n.value=(c.above.x+c.below.x)/2,r.value=(c.above.y+c.below.y)/2,s.value="central")):t.align==="target"?(c.above.x==d.above.x?i.value=c.above.y<d.above.y?"start":"end":i.value=c.above.x>d.above.x?"start":"end",t.verticalAlign==="above"?(n.value=d.above.x,r.value=d.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=d.below.x,r.value=d.below.y,s.value="hanging"):(n.value=(d.above.x+d.below.x)/2,r.value=(d.above.y+d.below.y)/2,s.value="central")):(i.value="middle",t.verticalAlign==="above"?(n.value=(c.above.x+d.above.x)/2,r.value=(c.above.y+d.above.y)/2,s.value="text-top"):t.verticalAlign==="below"?(n.value=(c.below.x+d.below.x)/2,r.value=(c.below.y+d.below.y)/2,s.value="hanging"):(n.value=(c.above.x+d.below.x)/2,r.value=(c.above.y+d.below.y)/2,s.value="central"));let u=W.fromPositions(c.above,d.above).v.angleDegree();(u<-90||u>=90)&&(u=u+180,u>180&&(u-=360)),a.value=u});const l=o.computed(()=>s.value==="central"&&!t.config.background?nt(J({},t.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):t.config);return(c,d)=>(o.openBlock(),o.createBlock(et,{class:"v-ng-edge-label",text:e.text,x:n.value,y:r.value,config:o.unref(l),"text-anchor":i.value,"dominant-baseline":s.value,transform:`rotate(${a.value} ${n.value} ${r.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),zd=Object.freeze(Object.defineProperty({__proto__:null,VEdgeLabel:hr,VLabelText:et,VNetworkGraph:dr,VShape:Qe,VStyle:fr},Symbol.toStringTag,{value:"Module"})),_d=10;class Id extends Ut{constructor(t={}){super(),this.options=t}setNodePosition(t,n){const r=this.options.grid||_d;t.value.x=Math.floor(n.x/r)*r,t.value.y=Math.floor(n.y/r)*r}}const Ad=function(e){Object.entries(zd).forEach(([t,n])=>{e.component(t,n)})};A.Config=B,A.GridLayout=Id,A.LayerPositions=q,A.NodeLabelDirection=z,A.SimpleLayout=Ut,A.VEdgeLabel=hr,A.VLabelText=et,A.VNetworkGraph=dr,A.VShape=Qe,A.VStyle=fr,A.Vector2D=D,A.configsWithType=Fl,A.defineConfigs=Ul,A.getFullConfigs=ql,A.install=Ad,A.useStates=ce,A.withSelf=ft,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.js.map
